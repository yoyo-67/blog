<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en-us">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Part 9: The Build System (build.zig) &middot; Yohai&#39;s Blog</title>
    <meta name="title" content="Part 9: The Build System (build.zig) &middot; Yohai&#39;s Blog">
  

  
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/drafts/09-build-system/">
  

  
  
    <meta name="author" content="Yohai">
  
  

  
  <meta property="og:url" content="http://localhost:1313/drafts/09-build-system/">
  <meta property="og:site_name" content="Yohai&#39;s Blog">
  <meta property="og:title" content="Part 9: The Build System (build.zig)">
  <meta property="og:description" content="Part 9: The Build System (build.zig) # In this article, we’ll explore Zig’s unique build system. Unlike traditional build tools, Zig’s build system is written in Zig itself - using comptime to create a type-safe, debuggable, cross-platform build experience.
Part 1: Why Do We Need a Build System? # The Problem # Compiling a single file is easy:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="drafts">
    <meta property="article:published_time" content="2025-12-17T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-12-17T00:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Part 9: The Build System (build.zig)">
  <meta name="twitter:description" content="Part 9: The Build System (build.zig) # In this article, we’ll explore Zig’s unique build system. Unlike traditional build tools, Zig’s build system is written in Zig itself - using comptime to create a type-safe, debuggable, cross-platform build experience.
Part 1: Why Do We Need a Build System? # The Problem # Compiling a single file is easy:">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.0975a8c7c266a0697f94839b45e1574c449de253527d44ed516d5c5c3c820c9389d7d86576faae12267b129f8749ecbf7581cddb636aba7690aa633b95aaa87d.css"
    integrity="sha512-CXWox8JmoGl/lIObReFXTESd4lNSfUTtUW1cXDyCDJOJ19hldvquEiZ7Ep&#43;HSey/dYHN22NqunaQqmM7laqofQ==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9cc802d09f28c6af56ceee7bc6e320a39251fdae98243f2a9942f221ac57a9f49c51609699a91794a7b2580ee1deaa8e4d794a68ffa94aa317c66e893ce51e02.js"
      integrity="sha512-nMgC0J8oxq9Wzu57xuMgo5JR/a6YJD8qmULyIaxXqfScUWCWmakXlKeyWA7h3qqOTXlKaP&#43;pSqMXxm6JPOUeAg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Drafts",
    "name": "Part 9: The Build System (build.zig)",
    "headline": "Part 9: The Build System (build.zig)",
    
    "abstract": "\u003ch1 class=\u0022relative group\u0022\u003ePart 9: The Build System (build.zig)\n    \u003cdiv id=\u0022part-9-the-build-system-buildzig\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#part-9-the-build-system-buildzig\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h1\u003e\n\u003cp\u003eIn this article, we\u0026rsquo;ll explore Zig\u0026rsquo;s unique build system. Unlike traditional build tools, Zig\u0026rsquo;s build system is written in Zig itself - using comptime to create a type-safe, debuggable, cross-platform build experience.\u003c\/p\u003e\n\u003chr\u003e\n\n\u003ch2 class=\u0022relative group\u0022\u003ePart 1: Why Do We Need a Build System?\n    \u003cdiv id=\u0022part-1-why-do-we-need-a-build-system\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#part-1-why-do-we-need-a-build-system\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h2\u003e\n\n\u003ch3 class=\u0022relative group\u0022\u003eThe Problem\n    \u003cdiv id=\u0022the-problem\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#the-problem\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h3\u003e\n\u003cp\u003eCompiling a single file is easy:\u003c\/p\u003e",
    "inLanguage": "en-us",
    "url" : "http://localhost:1313/drafts/09-build-system/",
    "author" : {
      "@type": "Person",
      "name": "Yohai"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-12-17T00:00:00\u002b00:00",
    "datePublished": "2025-12-17T00:00:00\u002b00:00",
    
    "dateModified": "2025-12-17T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "4884"
  }]
  </script>



  
  

  
  

  
  

  
  

  
  
</head>


















  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium">
          Yohai&rsquo;s Blog
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/posts/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Posts"
  title="Posts">
  
  
    <p class="text-base font-medium">
      Posts
    </p>
  
</a>



      
        
  <a
  href="/drafts/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Drafts"
  title="Drafts">
  
  
    <p class="text-base font-medium">
      Drafts
    </p>
  
</a>



      
        
  <a
  href="/tags/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Tags"
  title="Tags">
  
  
    <p class="text-base font-medium">
      Tags
    </p>
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/posts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Posts"
    title="Posts">
    
    
      <p class="text-bg font-bg">
        Posts
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/drafts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Drafts"
    title="Drafts">
    
    
      <p class="text-bg font-bg">
        Drafts
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/tags/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Tags"
    title="Tags">
    
    
      <p class="text-bg font-bg">
        Tags
      </p>
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/"
      >Yohai&#39;s Blog</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/drafts/"
      >Drafts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/drafts/09-build-system/"
      >Part 9: The Build System (build.zig)</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Part 9: The Build System (build.zig)
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-12-17T00:00:00&#43;00:00">December 17, 2025</time><span class="px-2 text-primary-500">&middot;</span><span>4884 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">23 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Yohai
      </div>
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            
              <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#part-1-why-do-we-need-a-build-system">Part 1: Why Do We Need a Build System?</a>
      <ul>
        <li><a href="#the-problem">The Problem</a></li>
        <li><a href="#traditional-build-systems">Traditional Build Systems</a></li>
      </ul>
    </li>
    <li><a href="#part-2-what-makes-zigs-build-system-different">Part 2: What Makes Zig&rsquo;s Build System Different?</a>
      <ul>
        <li><a href="#the-key-insight">The Key Insight</a></li>
        <li><a href="#a-simple-buildzig">A Simple build.zig</a></li>
        <li><a href="#what-you-get">What You Get</a></li>
      </ul>
    </li>
    <li><a href="#part-3-anatomy-of-a-buildzig-file">Part 3: Anatomy of a build.zig File</a>
      <ul>
        <li><a href="#the-build-object">The Build Object</a></li>
        <li><a href="#the-graph-shared-state">The Graph: Shared State</a></li>
        <li><a href="#build-system-vocabulary">Build System Vocabulary</a></li>
        <li><a href="#common-build-verbs">Common Build Verbs</a></li>
        <li><a href="#the-install-flow">The Install Flow</a></li>
        <li><a href="#creating-artifacts">Creating Artifacts</a></li>
      </ul>
    </li>
    <li><a href="#part-4-steps-and-the-build-graph">Part 4: Steps and the Build Graph</a>
      <ul>
        <li><a href="#what-is-a-step">What is a Step?</a></li>
        <li><a href="#step-types">Step Types</a></li>
        <li><a href="#the-build-graph">The Build Graph</a></li>
        <li><a href="#creating-dependencies">Creating Dependencies</a></li>
        <li><a href="#lazy-evaluation">Lazy Evaluation</a></li>
      </ul>
    </li>
    <li><a href="#part-5-build-options-and-configuration">Part 5: Build Options and Configuration</a>
      <ul>
        <li><a href="#optimization-modes">Optimization Modes</a></li>
        <li><a href="#target-selection">Target Selection</a></li>
        <li><a href="#custom-options">Custom Options</a></li>
      </ul>
    </li>
    <li><a href="#part-6-cross-compilation-made-simple">Part 6: Cross-Compilation Made Simple</a>
      <ul>
        <li><a href="#why-zig-excels-at-cross-compilation">Why Zig Excels at Cross-Compilation</a></li>
        <li><a href="#target-triples-explained">Target Triples Explained</a></li>
        <li><a href="#cross-compilation-in-practice">Cross-Compilation in Practice</a></li>
      </ul>
    </li>
    <li><a href="#part-7-dependencies-and-packages">Part 7: Dependencies and Packages</a>
      <ul>
        <li><a href="#the-buildzigzon-file">The build.zig.zon File</a></li>
        <li><a href="#using-dependencies-in-buildzig">Using Dependencies in build.zig</a></li>
        <li><a href="#how-dependencies-work">How Dependencies Work</a></li>
      </ul>
    </li>
    <li><a href="#part-8-integration-with-the-compiler">Part 8: Integration with the Compiler</a>
      <ul>
        <li><a href="#the-two-phase-build-process">The Two-Phase Build Process</a></li>
        <li><a href="#caching-connecting-to-article-8">Caching (Connecting to Article 8)</a></li>
        <li><a href="#step-execution">Step Execution</a></li>
      </ul>
    </li>
    <li><a href="#part-9-practical-examples">Part 9: Practical Examples</a>
      <ul>
        <li><a href="#example-1-simple-application">Example 1: Simple Application</a></li>
        <li><a href="#example-2-library-with-tests">Example 2: Library with Tests</a></li>
        <li><a href="#example-3-c-library-integration">Example 3: C Library Integration</a></li>
        <li><a href="#example-4-code-generation-step">Example 4: Code Generation Step</a></li>
      </ul>
    </li>
    <li><a href="#part-10-the-complete-picture">Part 10: The Complete Picture</a>
      <ul>
        <li><a href="#how-everything-fits-together">How Everything Fits Together</a></li>
        <li><a href="#the-full-compiler-pipeline-articles-1-9">The Full Compiler Pipeline (Articles 1-9)</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#part-1-why-do-we-need-a-build-system">Part 1: Why Do We Need a Build System?</a>
      <ul>
        <li><a href="#the-problem">The Problem</a></li>
        <li><a href="#traditional-build-systems">Traditional Build Systems</a></li>
      </ul>
    </li>
    <li><a href="#part-2-what-makes-zigs-build-system-different">Part 2: What Makes Zig&rsquo;s Build System Different?</a>
      <ul>
        <li><a href="#the-key-insight">The Key Insight</a></li>
        <li><a href="#a-simple-buildzig">A Simple build.zig</a></li>
        <li><a href="#what-you-get">What You Get</a></li>
      </ul>
    </li>
    <li><a href="#part-3-anatomy-of-a-buildzig-file">Part 3: Anatomy of a build.zig File</a>
      <ul>
        <li><a href="#the-build-object">The Build Object</a></li>
        <li><a href="#the-graph-shared-state">The Graph: Shared State</a></li>
        <li><a href="#build-system-vocabulary">Build System Vocabulary</a></li>
        <li><a href="#common-build-verbs">Common Build Verbs</a></li>
        <li><a href="#the-install-flow">The Install Flow</a></li>
        <li><a href="#creating-artifacts">Creating Artifacts</a></li>
      </ul>
    </li>
    <li><a href="#part-4-steps-and-the-build-graph">Part 4: Steps and the Build Graph</a>
      <ul>
        <li><a href="#what-is-a-step">What is a Step?</a></li>
        <li><a href="#step-types">Step Types</a></li>
        <li><a href="#the-build-graph">The Build Graph</a></li>
        <li><a href="#creating-dependencies">Creating Dependencies</a></li>
        <li><a href="#lazy-evaluation">Lazy Evaluation</a></li>
      </ul>
    </li>
    <li><a href="#part-5-build-options-and-configuration">Part 5: Build Options and Configuration</a>
      <ul>
        <li><a href="#optimization-modes">Optimization Modes</a></li>
        <li><a href="#target-selection">Target Selection</a></li>
        <li><a href="#custom-options">Custom Options</a></li>
      </ul>
    </li>
    <li><a href="#part-6-cross-compilation-made-simple">Part 6: Cross-Compilation Made Simple</a>
      <ul>
        <li><a href="#why-zig-excels-at-cross-compilation">Why Zig Excels at Cross-Compilation</a></li>
        <li><a href="#target-triples-explained">Target Triples Explained</a></li>
        <li><a href="#cross-compilation-in-practice">Cross-Compilation in Practice</a></li>
      </ul>
    </li>
    <li><a href="#part-7-dependencies-and-packages">Part 7: Dependencies and Packages</a>
      <ul>
        <li><a href="#the-buildzigzon-file">The build.zig.zon File</a></li>
        <li><a href="#using-dependencies-in-buildzig">Using Dependencies in build.zig</a></li>
        <li><a href="#how-dependencies-work">How Dependencies Work</a></li>
      </ul>
    </li>
    <li><a href="#part-8-integration-with-the-compiler">Part 8: Integration with the Compiler</a>
      <ul>
        <li><a href="#the-two-phase-build-process">The Two-Phase Build Process</a></li>
        <li><a href="#caching-connecting-to-article-8">Caching (Connecting to Article 8)</a></li>
        <li><a href="#step-execution">Step Execution</a></li>
      </ul>
    </li>
    <li><a href="#part-9-practical-examples">Part 9: Practical Examples</a>
      <ul>
        <li><a href="#example-1-simple-application">Example 1: Simple Application</a></li>
        <li><a href="#example-2-library-with-tests">Example 2: Library with Tests</a></li>
        <li><a href="#example-3-c-library-integration">Example 3: C Library Integration</a></li>
        <li><a href="#example-4-code-generation-step">Example 4: Code Generation Step</a></li>
      </ul>
    </li>
    <li><a href="#part-10-the-complete-picture">Part 10: The Complete Picture</a>
      <ul>
        <li><a href="#how-everything-fits-together">How Everything Fits Together</a></li>
        <li><a href="#the-full-compiler-pipeline-articles-1-9">The Full Compiler Pipeline (Articles 1-9)</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
  </div>
</details>



            
          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          
<h1 class="relative group">Part 9: The Build System (build.zig)
    <div id="part-9-the-build-system-buildzig" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-9-the-build-system-buildzig" aria-label="Anchor">#</a>
    </span>
    
</h1>
<p>In this article, we&rsquo;ll explore Zig&rsquo;s unique build system. Unlike traditional build tools, Zig&rsquo;s build system is written in Zig itself - using comptime to create a type-safe, debuggable, cross-platform build experience.</p>
<hr>

<h2 class="relative group">Part 1: Why Do We Need a Build System?
    <div id="part-1-why-do-we-need-a-build-system" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-1-why-do-we-need-a-build-system" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The Problem
    <div id="the-problem" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-problem" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Compiling a single file is easy:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">zig build-exe main.zig
</span></span></code></pre></td></tr></table>
</div>
</div><p>But real projects have many challenges:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    REAL PROJECT CHALLENGES                   │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  1. MULTIPLE FILES                                           │
│     main.zig, utils.zig, network.zig, database.zig...       │
│     How do they fit together?                                │
│                                                              │
│  2. DEPENDENCIES                                             │
│     Your code uses external libraries                        │
│     Those libraries have their own dependencies...           │
│                                                              │
│  3. DIFFERENT TARGETS                                        │
│     Build for Linux, Windows, macOS                          │
│     Build for x86, ARM, WASM                                 │
│                                                              │
│  4. BUILD CONFIGURATIONS                                     │
│     Debug build (slow, with symbols)                         │
│     Release build (fast, optimized)                          │
│                                                              │
│  5. CUSTOM STEPS                                             │
│     Generate code, run tests, package artifacts              │
│     Copy assets, generate documentation                      │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Traditional Build Systems
    <div id="traditional-build-systems" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#traditional-build-systems" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p><strong>Makefiles:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="cl"><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -O2
</span></span><span class="line"><span class="cl"><span class="nv">OBJECTS</span> <span class="o">=</span> main.o utils.o network.o
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">program</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJECTS</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="nv">$@</span> $^
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">%.o</span><span class="o">:</span> %.<span class="n">c</span>
</span></span><span class="line"><span class="cl">    <span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c -o <span class="nv">$@</span> $&lt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    rm -f <span class="k">$(</span>OBJECTS<span class="k">)</span> program
</span></span></code></pre></td></tr></table>
</div>
</div><p>Problems:</p>
<ul>
<li>Separate language (not your programming language)</li>
<li>Tab vs spaces matters (really!)</li>
<li>Hard to debug</li>
<li>Platform-specific (Windows?)</li>
<li>No type checking</li>
</ul>
<p><strong>CMake:</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cmake" data-lang="cmake"><span class="line"><span class="cl"><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">3.10</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">project</span><span class="p">(</span><span class="s">MyProject</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">add_executable</span><span class="p">(</span><span class="s">program</span> <span class="s">main.c</span> <span class="s">utils.c</span> <span class="s">network.c</span><span class="p">)</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="nb">target_compile_options</span><span class="p">(</span><span class="s">program</span> <span class="s">PRIVATE</span> <span class="s">-Wall</span> <span class="s">-O2</span><span class="p">)</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Problems:</p>
<ul>
<li>Another language to learn</li>
<li>Generates Makefiles (adds complexity)</li>
<li>Confusing syntax and scoping rules</li>
<li>Hard to debug</li>
</ul>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│           THE FUNDAMENTAL PROBLEM                            │
│                                                              │
│  You&#39;re using LANGUAGE A to build code written in LANGUAGE B │
│                                                              │
│  - Can&#39;t use your language&#39;s features                        │
│  - Can&#39;t use your language&#39;s debugger                        │
│  - Can&#39;t use your language&#39;s IDE support                     │
│  - Must learn another toolchain                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 2: What Makes Zig&rsquo;s Build System Different?
    <div id="part-2-what-makes-zigs-build-system-different" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-2-what-makes-zigs-build-system-different" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The Key Insight
    <div id="the-key-insight" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-key-insight" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    ZIG&#39;S APPROACH                            │
│                                                              │
│  What if the build system was written in... Zig?             │
│                                                              │
│  - Use the SAME language for code and build                  │
│  - Use the SAME debugger                                     │
│  - Use the SAME IDE                                          │
│  - Use the SAME error messages                               │
│  - Leverage comptime for configuration                       │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">A Simple build.zig
    <div id="a-simple-buildzig" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#a-simple-buildzig" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;std&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Get target and optimization from command line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create an executable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-program&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Install the executable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>That&rsquo;s it! This is a complete build configuration. And it&rsquo;s just Zig code!</p>

<h3 class="relative group">What You Get
    <div id="what-you-get" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#what-you-get" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│              BENEFITS OF ZIG BUILD SYSTEM                    │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  TYPE SAFETY                                                 │
│    Misspell a function name? Compile error!                  │
│    Wrong argument type? Compile error!                       │
│    No more &#34;undefined variable&#34; at runtime                   │
│                                                              │
│  DEBUGGABLE                                                  │
│    Set breakpoints in your build.zig                         │
│    Inspect variables                                         │
│    Step through build logic                                  │
│                                                              │
│  CROSS-PLATFORM BY DEFAULT                                   │
│    Same build.zig works on Linux, Windows, macOS             │
│    No platform-specific conditionals needed                  │
│                                                              │
│  COMPTIME POWER                                              │
│    Generate build logic at compile time                      │
│    Conditional compilation                                   │
│    Code generation                                           │
│                                                              │
│  INTEGRATED CACHING                                          │
│    Uses the same cache as the compiler (Article 8!)          │
│    Automatic incremental builds                              │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 3: Anatomy of a build.zig File
    <div id="part-3-anatomy-of-a-buildzig-file" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-3-anatomy-of-a-buildzig-file" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The Build Object
    <div id="the-build-object" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-build-object" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>When Zig runs your build.zig, it passes you a <code>*std.Build</code> object. This is your interface to the build system:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// &#39;b&#39; is your Build object
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// It has everything you need
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Looking at the actual source code (<code>std/Build.zig</code>), the Build struct contains:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    THE BUILD STRUCT                          │
│                    (from std/Build.zig)                      │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  graph: *Graph           // Shared state, cache, zig exe     │
│  allocator: Allocator    // Memory allocation                │
│                                                              │
│  install_tls: TopLevelStep    // The &#34;install&#34; step          │
│  uninstall_tls: TopLevelStep  // The &#34;uninstall&#34; step        │
│  default_step: *Step          // What runs by default        │
│                                                              │
│  build_root: Cache.Directory  // Where build.zig lives       │
│  cache_root: Cache.Directory  // Where cache goes            │
│  install_prefix: []const u8   // Where to install            │
│                                                              │
│  modules: StringArrayHashMap(*Module)  // Named modules      │
│  available_deps: AvailableDeps         // Dependencies       │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">The Graph: Shared State
    <div id="the-graph-shared-state" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-graph-shared-state" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="c1">// From std/Build.zig
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">pub</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="n">Graph</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">arena</span><span class="o">:</span><span class="w"> </span><span class="n">Allocator</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">cache</span><span class="o">:</span><span class="w"> </span><span class="n">Cache</span><span class="p">,</span><span class="w">                        </span><span class="c1">// The compilation cache
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">zig_exe</span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="o">:</span><span class="mi">0</span><span class="p">]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w">               </span><span class="c1">// Path to zig executable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">env_map</span><span class="o">:</span><span class="w"> </span><span class="n">EnvMap</span><span class="p">,</span><span class="w">                     </span><span class="c1">// Environment variables
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">global_cache_root</span><span class="o">:</span><span class="w"> </span><span class="n">Cache</span><span class="p">.</span><span class="n">Directory</span><span class="p">,</span><span class="w">  </span><span class="c1">// Global cache location
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">zig_lib_directory</span><span class="o">:</span><span class="w"> </span><span class="n">Cache</span><span class="p">.</span><span class="n">Directory</span><span class="p">,</span><span class="w">  </span><span class="c1">// Standard library location
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">host</span><span class="o">:</span><span class="w"> </span><span class="n">ResolvedTarget</span><span class="p">,</span><span class="w">                </span><span class="c1">// Native target info
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>The Graph is shared across all Build instances (including dependencies). It holds the cache, environment, and compiler paths.</p>

<h3 class="relative group">Build System Vocabulary
    <div id="build-system-vocabulary" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#build-system-vocabulary" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Before diving deeper, let&rsquo;s define the key terms. These names come from build system traditions but have specific meanings in Zig:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────────────┐
│ BUILD SYSTEM GLOSSARY                                                │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│ ARTIFACT                                                            │
│ ─────────                                                           │
│ Something the build system PRODUCES. The &#34;art&#34; you&#39;re creating.    │
│                                                                      │
│   • Executable    (a program you can run)                           │
│   • Static lib    (.a file - code bundled for linking)              │
│   • Shared lib    (.so/.dylib/.dll - loadable at runtime)           │
│   • Object file   (.o - compiled but not linked)                    │
│                                                                      │
│ When you call b.addExecutable(), you&#39;re creating an artifact.       │
│ The artifact isn&#39;t built yet - it&#39;s a DESCRIPTION of what to build. │
│                                                                      │
│ ─────────────────────────────────────────────────────────────────── │
│                                                                      │
│ INSTALL                                                             │
│ ────────                                                            │
│ Copy an artifact to a known location (zig-out/ by default).        │
│                                                                      │
│   b.installArtifact(exe)                                            │
│   └── Copies the compiled exe to zig-out/bin/                       │
│                                                                      │
│ Why &#34;install&#34;? It&#39;s borrowed from Unix tradition:                   │
│   make install  →  copy program to /usr/local/bin                   │
│   zig build     →  copy program to zig-out/bin                      │
│                                                                      │
│ Without installArtifact(), the exe exists only in the cache!       │
│                                                                      │
│ ─────────────────────────────────────────────────────────────────── │
│                                                                      │
│ STEP                                                                │
│ ─────                                                               │
│ A unit of work in the build. Steps form a dependency graph.        │
│                                                                      │
│   compile step    →  &#34;compile this Zig code&#34;                        │
│   install step    →  &#34;copy this file to zig-out/&#34;                   │
│   run step        →  &#34;execute this program&#34;                         │
│   custom step     →  &#34;run this arbitrary function&#34;                  │
│                                                                      │
│ Every artifact has an underlying step (&amp;exe.step).                  │
│                                                                      │
│ ─────────────────────────────────────────────────────────────────── │
│                                                                      │
│ MODULE                                                              │
│ ───────                                                             │
│ A reusable unit of Zig code that can be imported.                  │
│                                                                      │
│   const mod = b.addModule(&#34;utils&#34;, .{...});                         │
│   exe.root_module.addImport(&#34;utils&#34;, mod);                          │
│   // Now main.zig can do: @import(&#34;utils&#34;)                          │
│                                                                      │
│ ─────────────────────────────────────────────────────────────────── │
│                                                                      │
│ DEPENDENCY                                                          │
│ ───────────                                                         │
│ An external package fetched from a URL or path.                    │
│                                                                      │
│   In build.zig.zon:                                                 │
│   .dependencies = .{ .zap = .{ .url = &#34;...&#34;, .hash = &#34;...&#34; } }     │
│                                                                      │
│   In build.zig:                                                     │
│   const zap = b.dependency(&#34;zap&#34;, .{});                             │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Common Build Verbs
    <div id="common-build-verbs" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#common-build-verbs" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Here&rsquo;s what the common <code>b.add*</code> and <code>b.*</code> functions do:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────────────┐
│ BUILD VERBS (b.add* functions)                                       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│ CREATING ARTIFACTS:                                                 │
│                                                                      │
│   b.addExecutable(...)      Create a runnable program               │
│   b.addStaticLibrary(...)   Create a .a static library              │
│   b.addSharedLibrary(...)   Create a .so/.dylib shared library      │
│   b.addObject(...)          Create a .o object file                 │
│   b.addTest(...)            Create a test executable                │
│                                                                      │
│ CREATING STEPS:                                                     │
│                                                                      │
│   b.addRunArtifact(exe)     Create step that RUNS an artifact       │
│   b.addInstallArtifact(exe) Create step that INSTALLS an artifact   │
│   b.addSystemCommand(&amp;.{})  Run arbitrary system command            │
│   b.addWriteFiles()         Generate files at build time            │
│                                                                      │
│ INSTALLING:                                                         │
│                                                                      │
│   b.installArtifact(exe)    Shorthand: add install step + register │
│   b.installFile(...)        Copy a file to zig-out/                 │
│   b.installDirectory(...)   Copy a directory to zig-out/            │
│                                                                      │
│ NAMED STEPS:                                                        │
│                                                                      │
│   b.step(&#34;name&#34;, &#34;desc&#34;)    Create a named step (for zig build X)  │
│                             Returns *Step that you can add deps to │
│                                                                      │
│ GETTING THINGS:                                                     │
│                                                                      │
│   b.path(&#34;src/main.zig&#34;)    Get path relative to build root         │
│   b.dependency(&#34;name&#34;, .{}) Get an external dependency              │
│   b.option(...)             Get command-line option value           │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">The Install Flow
    <div id="the-install-flow" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-install-flow" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Here&rsquo;s exactly what happens when you call <code>b.installArtifact(exe)</code>:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────────────┐
│ WHAT installArtifact() DOES                                          │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│   const exe = b.addExecutable(.{ .name = &#34;myapp&#34;, ... });           │
│   b.installArtifact(exe);                                           │
│                                                                      │
│   This creates the following graph:                                 │
│                                                                      │
│   ┌─────────────────────────────────────────────────────────────┐   │
│   │                                                             │   │
│   │   &#34;install&#34; step (the default)                              │   │
│   │        │                                                    │   │
│   │        ▼                                                    │   │
│   │   install_artifact step                                     │   │
│   │   &#34;copy zig-cache/.../myapp to zig-out/bin/myapp&#34;          │   │
│   │        │                                                    │   │
│   │        ▼                                                    │   │
│   │   compile step                                              │   │
│   │   &#34;compile src/main.zig to zig-cache/.../myapp&#34;            │   │
│   │                                                             │   │
│   └─────────────────────────────────────────────────────────────┘   │
│                                                                      │
│   When you run `zig build`:                                         │
│   1. Run compile step → produces exe in zig-cache/                 │
│   2. Run install_artifact step → copies to zig-out/bin/            │
│   3. Done!                                                          │
│                                                                      │
│   The artifact lives in TWO places:                                 │
│   • zig-cache/o/...     (internal, for caching)                    │
│   • zig-out/bin/myapp   (user-facing, for running)                 │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Creating Artifacts
    <div id="creating-artifacts" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#creating-artifacts" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>The most common operations:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create a module (reusable code)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">my_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addModule</span><span class="p">(</span><span class="s">&#34;my_module&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/my_module.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create an executable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-program&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create a static library
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addStaticLibrary</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-lib&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/lib.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create a shared/dynamic library
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">shared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addSharedLibrary</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-shared&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/lib.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>

<h2 class="relative group">Part 4: Steps and the Build Graph
    <div id="part-4-steps-and-the-build-graph" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-4-steps-and-the-build-graph" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">What is a Step?
    <div id="what-is-a-step" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#what-is-a-step" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Everything in the build system is a <strong>Step</strong>. From <code>std/Build/Step.zig</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="c1">// The Step struct (simplified)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">id</span><span class="o">:</span><span class="w"> </span><span class="n">Id</span><span class="p">,</span><span class="w">                    </span><span class="c1">// What kind of step (compile, run, install...)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w">          </span><span class="c1">// Human-readable name
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">owner</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">Build</span><span class="p">,</span><span class="w">             </span><span class="c1">// Which Build created this
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">makeFn</span><span class="o">:</span><span class="w"> </span><span class="n">MakeFn</span><span class="p">,</span><span class="w">            </span><span class="c1">// Function to execute this step
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">dependencies</span><span class="o">:</span><span class="w"> </span><span class="nf">ArrayList</span><span class="p">(</span><span class="o">*</span><span class="n">Step</span><span class="p">),</span><span class="w">  </span><span class="c1">// Steps that must run BEFORE this
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">dependants</span><span class="o">:</span><span class="w"> </span><span class="nf">ArrayList</span><span class="p">(</span><span class="o">*</span><span class="n">Step</span><span class="p">),</span><span class="w">    </span><span class="c1">// Steps that depend on THIS step
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">state</span><span class="o">:</span><span class="w"> </span><span class="n">State</span><span class="p">,</span><span class="w">              </span><span class="c1">// precheck, running, success, failure...
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Step Types
    <div id="step-types" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#step-types" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>From the source code, here are all the step types:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                      STEP TYPES                              │
│                  (from Step.Id enum)                         │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  top_level        - Named top-level steps (install, test)    │
│  compile          - Compile Zig/C/C++ code                   │
│  install_artifact - Copy artifact to install directory       │
│  install_file     - Copy a single file                       │
│  install_dir      - Copy a directory                         │
│  remove_dir       - Remove a directory                       │
│  run              - Run an executable                        │
│  write_file       - Generate a file with content             │
│  translate_c      - Convert C headers to Zig                 │
│  config_header    - Generate config.h style headers          │
│  objcopy          - Transform object files                   │
│  fmt              - Format source code                       │
│  check_file       - Verify file contents                     │
│  check_object     - Verify object file properties            │
│  options          - Generate options module                  │
│  fail             - Always fail (for testing)                │
│  custom           - User-defined step                        │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">The Build Graph
    <div id="the-build-graph" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-build-graph" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Steps form a <strong>directed acyclic graph (DAG)</strong>:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    BUILD GRAPH EXAMPLE                       │
│                                                              │
│     ┌─────────────┐                                          │
│     │   install   │  (default step)                          │
│     └──────┬──────┘                                          │
│            │                                                 │
│            ▼                                                 │
│     ┌─────────────┐                                          │
│     │  install    │                                          │
│     │  artifact   │                                          │
│     └──────┬──────┘                                          │
│            │                                                 │
│            ▼                                                 │
│     ┌─────────────┐     ┌─────────────┐                      │
│     │   compile   │────►│   compile   │                      │
│     │   (exe)     │     │   (lib)     │                      │
│     └─────────────┘     └─────────────┘                      │
│                                                              │
│  Arrow means &#34;depends on&#34;                                    │
│  Steps run in dependency order                               │
│  Independent steps can run in PARALLEL                       │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Creating Dependencies
    <div id="creating-dependencies" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#creating-dependencies" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create steps
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addStaticLibrary</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;mylib&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/lib.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;myapp&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// exe depends on lib
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="nf">linkLibrary</span><span class="p">(</span><span class="n">lib</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Create a run step
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">run_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addRunArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Make &#34;zig build run&#34; work
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">run_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">step</span><span class="p">(</span><span class="s">&#34;run&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Run the application&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">run_step</span><span class="p">.</span><span class="nf">dependOn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">run_cmd</span><span class="p">.</span><span class="n">step</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Lazy Evaluation
    <div id="lazy-evaluation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lazy-evaluation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Steps are <strong>lazy</strong> - they only run if needed:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    LAZY EVALUATION                           │
│                                                              │
│  $ zig build              # Only runs &#34;install&#34; and deps     │
│  $ zig build run          # Only runs &#34;run&#34; and deps         │
│  $ zig build test         # Only runs &#34;test&#34; and deps        │
│                                                              │
│  Steps NOT in the dependency chain are SKIPPED!              │
│                                                              │
│  This is why `zig build` is fast even with many steps:       │
│  It only does what&#39;s actually needed.                        │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 5: Build Options and Configuration
    <div id="part-5-build-options-and-configuration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-5-build-options-and-configuration" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Optimization Modes
    <div id="optimization-modes" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#optimization-modes" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>From the source code, Zig has these optimization modes:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="c1">// From std/builtin.zig
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">pub</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="n">OptimizeMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Debug</span><span class="p">,</span><span class="w">         </span><span class="c1">// No optimizations, keep debug info
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">ReleaseSafe</span><span class="p">,</span><span class="w">   </span><span class="c1">// Optimizations ON, safety checks ON
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">ReleaseFast</span><span class="p">,</span><span class="w">   </span><span class="c1">// Optimizations ON, safety checks OFF (fastest)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">ReleaseSmall</span><span class="p">,</span><span class="w">  </span><span class="c1">// Optimize for binary size
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Using them in build.zig:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Let user choose via command line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// optimize is now one of: Debug, ReleaseSafe, ReleaseFast, ReleaseSmall
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// User selects with: zig build -Doptimize=ReleaseFast
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>The <code>standardOptimizeOption</code> function (from Build.zig:1319):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">standardOptimizeOption</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">Build</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="o">:</span><span class="w"> </span><span class="n">StandardOptimizeOptionOptions</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">OptimizeMode</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Check for --release flag
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="nf">option</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;release&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;optimize for end users&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="n">_</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">preferred_optimize_mode</span><span class="w"> </span><span class="k">orelse</span><span class="w"> </span><span class="p">.</span><span class="n">ReleaseFast</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Check for -Doptimize=X
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="nf">option</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">builtin</span><span class="p">.</span><span class="n">OptimizeMode</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;optimize&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;...&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">|</span><span class="n">mode</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">mode</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Default to Debug
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">.</span><span class="n">Debug</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Target Selection
    <div id="target-selection" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#target-selection" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Let user choose target via command line
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// User selects with: zig build -Dtarget=x86_64-linux-gnu
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">//                    zig build -Dtarget=aarch64-macos
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">//                    zig build -Dtarget=wasm32-wasi
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Custom Options
    <div id="custom-options" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#custom-options" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>You can define your own build options:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Boolean option
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">enable_logging</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">option</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">bool</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;enable-logging&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;Enable debug logging&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">orelse</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// String option
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">config_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">option</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">[]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;config&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;Path to config file&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">orelse</span><span class="w"> </span><span class="s">&#34;config.json&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Enum option
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">backend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">option</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">opengl</span><span class="p">,</span><span class="w"> </span><span class="n">vulkan</span><span class="p">,</span><span class="w"> </span><span class="n">metal</span><span class="w"> </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;backend&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;Graphics backend to use&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w"> </span><span class="k">orelse</span><span class="w"> </span><span class="p">.</span><span class="n">opengl</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Use in compilation
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Pass options to code via @import(&#34;build_options&#34;)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addOptions</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="nf">addOption</span><span class="p">(</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;enable_logging&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">enable_logging</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="nf">addOption</span><span class="p">([]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;config_path&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">config_path</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="n">root_module</span><span class="p">.</span><span class="nf">addOptions</span><span class="p">(</span><span class="s">&#34;build_options&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>In your Zig code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">build_options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;build_options&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">build_options</span><span class="p">.</span><span class="n">enable_logging</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">std</span><span class="p">.</span><span class="n">log</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="s">&#34;Logging enabled!&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>

<h2 class="relative group">Part 6: Cross-Compilation Made Simple
    <div id="part-6-cross-compilation-made-simple" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-6-cross-compilation-made-simple" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Why Zig Excels at Cross-Compilation
    <div id="why-zig-excels-at-cross-compilation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#why-zig-excels-at-cross-compilation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│              WHY ZIG CROSS-COMPILATION IS EASY               │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  1. BUNDLED LIBC                                             │
│     Zig ships with libc for EVERY supported platform         │
│     No need to install cross-compilers or SDKs               │
│                                                              │
│  2. UNIFIED TOOLCHAIN                                        │
│     Same zig command for all targets                         │
│     No arm-linux-gnueabihf-gcc mess                          │
│                                                              │
│  3. TARGET TRIPLE IN CODE                                    │
│     Same build.zig for all platforms                         │
│     Just pass -Dtarget=...                                   │
│                                                              │
│  4. COMPTIME TARGET INFO                                     │
│     @import(&#34;builtin&#34;).target available at comptime          │
│     Conditional compilation without preprocessor             │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Target Triples Explained
    <div id="target-triples-explained" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#target-triples-explained" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>A target triple describes the platform:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    TARGET TRIPLE FORMAT                      │
│                                                              │
│              arch - os - abi                                 │
│                                                              │
│  Examples:                                                   │
│    x86_64-linux-gnu      Linux with glibc                    │
│    x86_64-linux-musl     Linux with musl libc                │
│    aarch64-macos-none    macOS on Apple Silicon              │
│    x86_64-windows-msvc   Windows with MSVC ABI               │
│    wasm32-wasi-none      WebAssembly with WASI               │
│    arm-linux-gnueabihf   ARM Linux with hardware float       │
│                                                              │
│  Special values:                                             │
│    native                Your current system                 │
│    native-native-musl    Native arch/OS, but use musl        │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Cross-Compilation in Practice
    <div id="cross-compilation-in-practice" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#cross-compilation-in-practice" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Set a default different from native
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">default_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">cpu_arch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">x86_64</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">os_tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">linux</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">abi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">gnu</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-program&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Build for different platforms:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Build for current system</span>
</span></span><span class="line"><span class="cl">zig build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for Linux x86_64</span>
</span></span><span class="line"><span class="cl">zig build -Dtarget<span class="o">=</span>x86_64-linux-gnu
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for Windows</span>
</span></span><span class="line"><span class="cl">zig build -Dtarget<span class="o">=</span>x86_64-windows-msvc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for macOS ARM</span>
</span></span><span class="line"><span class="cl">zig build -Dtarget<span class="o">=</span>aarch64-macos
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for WebAssembly</span>
</span></span><span class="line"><span class="cl">zig build -Dtarget<span class="o">=</span>wasm32-wasi
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Build for Raspberry Pi</span>
</span></span><span class="line"><span class="cl">zig build -Dtarget<span class="o">=</span>arm-linux-gnueabihf
</span></span></code></pre></td></tr></table>
</div>
</div><p>All with the SAME build.zig, SAME zig compiler, NO extra setup!</p>
<hr>

<h2 class="relative group">Part 7: Dependencies and Packages
    <div id="part-7-dependencies-and-packages" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-7-dependencies-and-packages" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The build.zig.zon File
    <div id="the-buildzigzon-file" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-buildzigzon-file" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Dependencies are declared in <code>build.zig.zon</code> (Zig Object Notation):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-project&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;0.1.0&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="n">dependencies</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Fetch from URL
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">zap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;https://github.com/zigzap/zap/archive/v0.1.0.tar.gz&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;1220a1b2c3d4e5f6...&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Fetch from Git
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">mach</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;git+https://github.com/hexops/mach.git&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;1220f7e8d9c0b1a2...&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// Local path (for development)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">my_lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">.</span><span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;../my-lib&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="n">paths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;build.zig&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;build.zig.zon&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="s">&#34;src&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Using Dependencies in build.zig
    <div id="using-dependencies-in-buildzig" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#using-dependencies-in-buildzig" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Get a dependency
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">zap_dep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">dependency</span><span class="p">(</span><span class="s">&#34;zap&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;my-server&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Import a module from the dependency
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="n">root_module</span><span class="p">.</span><span class="nf">addImport</span><span class="p">(</span><span class="s">&#34;zap&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">zap_dep</span><span class="p">.</span><span class="nf">module</span><span class="p">(</span><span class="s">&#34;zap&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">How Dependencies Work
    <div id="how-dependencies-work" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#how-dependencies-work" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                  DEPENDENCY RESOLUTION                       │
│                                                              │
│  1. READ build.zig.zon                                       │
│     Parse dependency declarations                            │
│                                                              │
│  2. FETCH (if needed)                                        │
│     Download from URL or clone from Git                      │
│     Verify hash matches (security!)                          │
│     Store in global cache                                    │
│                                                              │
│  3. BUILD DEPENDENCY                                         │
│     Run dependency&#39;s build.zig                               │
│     Each dependency gets its own Build instance              │
│     (This is createChild() in Build.zig)                     │
│                                                              │
│  4. EXPOSE MODULES                                           │
│     Dependency exports modules                               │
│     Your code imports them                                   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre><p>From the source (Build.zig:2006):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">dependency</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">Build</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="o">:</span><span class="w"> </span><span class="p">[]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="o">:</span><span class="w"> </span><span class="n">anytype</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="n">Dependency</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Look up the package hash from build.zig.zon
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">pkg_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">findPkgHashOrFatal</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Find the package in the dependency cache
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// Create a child Build instance for the dependency
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="c1">// Run the dependency&#39;s build.zig
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nf">dependencyInner</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">pkg</span><span class="p">.</span><span class="n">build_root</span><span class="p">,</span><span class="w"> </span><span class="p">...);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>

<h2 class="relative group">Part 8: Integration with the Compiler
    <div id="part-8-integration-with-the-compiler" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-8-integration-with-the-compiler" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The Two-Phase Build Process
    <div id="the-two-phase-build-process" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-two-phase-build-process" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>When you run <code>zig build</code>, two things happen:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    TWO-PHASE BUILD                           │
│                                                              │
│  PHASE 1: COMPILE build.zig                                  │
│  ─────────────────────────────                               │
│    build.zig is a Zig program                                │
│    Compile it with the Zig compiler                          │
│    This produces an executable (the &#34;build runner&#34;)          │
│                                                              │
│           build.zig                                          │
│               │                                              │
│               ▼                                              │
│        ┌───────────┐                                         │
│        │    Zig    │                                         │
│        │ Compiler  │                                         │
│        └───────────┘                                         │
│               │                                              │
│               ▼                                              │
│         build_runner                                         │
│        (executable)                                          │
│                                                              │
│  PHASE 2: RUN build_runner                                   │
│  ─────────────────────────                                   │
│    Execute the build runner                                  │
│    It calls your build() function                            │
│    It executes the build graph                               │
│                                                              │
│        build_runner                                          │
│               │                                              │
│               ▼                                              │
│    ┌─────────────────────┐                                   │
│    │  Your build() func  │                                   │
│    │  Creates steps      │                                   │
│    │  Sets up deps       │                                   │
│    └─────────────────────┘                                   │
│               │                                              │
│               ▼                                              │
│    ┌─────────────────────┐                                   │
│    │  Execute steps      │                                   │
│    │  (compile, link,    │                                   │
│    │   run tests, etc.)  │                                   │
│    └─────────────────────┘                                   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Caching (Connecting to Article 8)
    <div id="caching-connecting-to-article-8" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#caching-connecting-to-article-8" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>The build system uses the SAME caching infrastructure as the compiler:</p>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│            BUILD SYSTEM + CACHING                            │
│                                                              │
│  build.zig itself is cached:                                 │
│    - First run: compile build.zig → build_runner            │
│    - Second run: build.zig unchanged? Reuse build_runner!   │
│                                                              │
│  Every compilation step is cached:                           │
│    - Hash(source + flags + deps) → cached?                   │
│    - If cached, skip compilation!                            │
│                                                              │
│  The Graph struct holds the cache:                           │
│    graph.cache: Cache   // From Build.zig                    │
│                                                              │
│  This is why `zig build` is FAST:                            │
│    - Incremental build.zig compilation                       │
│    - Incremental source compilation                          │
│    - Parallel step execution                                 │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Step Execution
    <div id="step-execution" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#step-execution" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>From Step.zig, steps have states:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">pub</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">precheck_unstarted</span><span class="p">,</span><span class="w">   </span><span class="c1">// Not started yet
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">precheck_started</span><span class="p">,</span><span class="w">     </span><span class="c1">// Checking if needs to run
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">precheck_done</span><span class="p">,</span><span class="w">        </span><span class="c1">// Ready to run (or dirty)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">running</span><span class="p">,</span><span class="w">              </span><span class="c1">// Currently executing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">dependency_failure</span><span class="p">,</span><span class="w">   </span><span class="c1">// A dependency failed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">success</span><span class="p">,</span><span class="w">              </span><span class="c1">// Completed successfully
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">failure</span><span class="p">,</span><span class="w">              </span><span class="c1">// Failed
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">skipped</span><span class="p">,</span><span class="w">              </span><span class="c1">// Skipped (e.g., conditional)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">skipped_oom</span><span class="p">,</span><span class="w">          </span><span class="c1">// Skipped due to memory limit
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>The build runner:</p>
<ol>
<li>Topologically sorts the step graph</li>
<li>Runs steps in dependency order</li>
<li>Runs independent steps in PARALLEL</li>
<li>Respects memory limits (<code>max_rss</code> field)</li>
</ol>
<hr>

<h2 class="relative group">Part 9: Practical Examples
    <div id="part-9-practical-examples" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-9-practical-examples" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Example 1: Simple Application
    <div id="example-1-simple-application" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#example-1-simple-application" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;std&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;hello&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// &#34;zig build run&#34; command
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">run_cmd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addRunArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">run_cmd</span><span class="p">.</span><span class="n">step</span><span class="p">.</span><span class="nf">dependOn</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="nf">getInstallStep</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">run_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">step</span><span class="p">(</span><span class="s">&#34;run&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Run the application&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">run_step</span><span class="p">.</span><span class="nf">dependOn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">run_cmd</span><span class="p">.</span><span class="n">step</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Example 2: Library with Tests
    <div id="example-2-library-with-tests" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#example-2-library-with-tests" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;std&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// The library
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addStaticLibrary</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;mylib&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/lib.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">lib</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Unit tests
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">lib_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addTest</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/lib.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">run_lib_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addRunArtifact</span><span class="p">(</span><span class="n">lib_tests</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">test_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">step</span><span class="p">(</span><span class="s">&#34;test&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;Run unit tests&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">test_step</span><span class="p">.</span><span class="nf">dependOn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">run_lib_tests</span><span class="p">.</span><span class="n">step</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Example 3: C Library Integration
    <div id="example-3-c-library-integration" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#example-3-c-library-integration" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;std&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;with-c&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Add C source files
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="nf">addCSourceFiles</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;src/legacy.c&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;src/wrapper.c&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;-Wall&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;-Wextra&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="s">&#34;-std=c99&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Link system library
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="nf">linkSystemLibrary</span><span class="p">(</span><span class="s">&#34;sqlite3&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="nf">linkLibC</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Add include path
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="nf">addIncludePath</span><span class="p">(</span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;include&#34;</span><span class="p">));</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
<h3 class="relative group">Example 4: Code Generation Step
    <div id="example-4-code-generation-step" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#example-4-code-generation-step" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">@import</span><span class="p">(</span><span class="s">&#34;std&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">b</span><span class="o">:</span><span class="w"> </span><span class="o">*</span><span class="n">std</span><span class="p">.</span><span class="n">Build</span><span class="p">)</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardTargetOptions</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">standardOptimizeOption</span><span class="p">(.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Generate a Zig file at build time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">gen_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addWriteFile</span><span class="p">(</span><span class="s">&#34;generated.zig&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\pub const version = &#34;1.0.0&#34;;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\pub const build_time = @import(&#34;std&#34;).time.timestamp();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">exe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">addExecutable</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;app&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="nf">path</span><span class="p">(</span><span class="s">&#34;src/main.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">optimize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">optimize</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// Use the generated file
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">exe</span><span class="p">.</span><span class="n">root_module</span><span class="p">.</span><span class="nf">addAnonymousImport</span><span class="p">(</span><span class="s">&#34;generated&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">root_source_file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gen_step</span><span class="p">.</span><span class="nf">getDirectory</span><span class="p">().</span><span class="nf">path</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;generated.zig&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">b</span><span class="p">.</span><span class="nf">installArtifact</span><span class="p">(</span><span class="n">exe</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><hr>

<h2 class="relative group">Part 10: The Complete Picture
    <div id="part-10-the-complete-picture" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-10-the-complete-picture" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">How Everything Fits Together
    <div id="how-everything-fits-together" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#how-everything-fits-together" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│                    THE COMPLETE PICTURE                      │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                    build.zig.zon                      │   │
│  │               (dependency declarations)               │   │
│  └──────────────────────────────────────────────────────┘   │
│                            │                                 │
│                            ▼                                 │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                     build.zig                         │   │
│  │                  (your build logic)                   │   │
│  └──────────────────────────────────────────────────────┘   │
│                            │                                 │
│              ┌─────────────┴─────────────┐                   │
│              │                           │                   │
│              ▼                           ▼                   │
│  ┌─────────────────────┐    ┌─────────────────────────┐     │
│  │   Phase 1: Compile  │    │    Fetch Dependencies   │     │
│  │    build.zig        │    │  (from build.zig.zon)   │     │
│  └─────────────────────┘    └─────────────────────────┘     │
│              │                           │                   │
│              └─────────────┬─────────────┘                   │
│                            │                                 │
│                            ▼                                 │
│  ┌──────────────────────────────────────────────────────┐   │
│  │              Phase 2: Run Build Graph                 │   │
│  │                                                       │   │
│  │    ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐        │   │
│  │    │Step 1│──►│Step 2│──►│Step 3│──►│Step 4│        │   │
│  │    └──────┘   └──────┘   └──────┘   └──────┘        │   │
│  │         │                     │                       │   │
│  │         └──────────┬──────────┘                       │   │
│  │                    ▼                                  │   │
│  │              PARALLEL EXECUTION                       │   │
│  │            (where possible)                           │   │
│  └──────────────────────────────────────────────────────┘   │
│                            │                                 │
│                            ▼                                 │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                 Compilation Cache                     │   │
│  │              (from Article 8)                         │   │
│  │                                                       │   │
│  │   ┌──────────────────────────────────────────────┐   │   │
│  │   │  Hash(source + flags + deps) → cached output  │   │   │
│  │   │  Skip work if already cached!                 │   │   │
│  │   └──────────────────────────────────────────────┘   │   │
│  └──────────────────────────────────────────────────────┘   │
│                            │                                 │
│                            ▼                                 │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                    Output                             │   │
│  │                                                       │   │
│  │        zig-out/                                       │   │
│  │        ├── bin/                                       │   │
│  │        │   └── my-program                             │   │
│  │        └── lib/                                       │   │
│  │            └── libmylib.a                             │   │
│  └──────────────────────────────────────────────────────┘   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">The Full Compiler Pipeline (Articles 1-9)
    <div id="the-full-compiler-pipeline-articles-1-9" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-full-compiler-pipeline-articles-1-9" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌─────────────────────────────────────────────────────────────┐
│              ZIG COMPILATION: THE FULL PICTURE               │
│                                                              │
│                      build.zig                               │
│                          │                                   │
│                          ▼                                   │
│  ┌──────────────────────────────────────────────────────┐   │
│  │                   BUILD SYSTEM                        │   │
│  │                   (Article 9)                         │   │
│  │   Orchestrates the entire compilation process         │   │
│  └────────────────────────┬─────────────────────────────┘   │
│                           │                                  │
│         ┌─────────────────┼─────────────────┐               │
│         │                 │                 │               │
│         ▼                 ▼                 ▼               │
│      file1.zig        file2.zig        file3.zig           │
│         │                 │                 │               │
│         ▼                 ▼                 ▼               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  FRONTEND (Articles 2-5)                             │   │
│  │  Tokenize → Parse → ZIR → Sema                       │   │
│  └─────────────────────────────────────────────────────┘   │
│         │                 │                 │               │
│         ▼                 ▼                 ▼               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  BACKEND (Article 6)                                 │   │
│  │  AIR → Machine Code                                  │   │
│  └─────────────────────────────────────────────────────┘   │
│         │                 │                 │               │
│         └─────────────────┼─────────────────┘               │
│                           │                                  │
│                           ▼                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  LINKER (Article 7)                                  │   │
│  │  Combine objects → Executable                        │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                  │
│                           ▼                                  │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  CACHING (Article 8)                                 │   │
│  │  Skip unchanged work                                 │   │
│  └─────────────────────────────────────────────────────┘   │
│                           │                                  │
│                           ▼                                  │
│                      Executable!                             │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Summary
    <div id="summary" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#summary" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Zig&rsquo;s build system is unique because:</p>
<ol>
<li><strong>It&rsquo;s Just Zig</strong> - No separate build language to learn</li>
<li><strong>Type-Safe</strong> - Compiler catches build configuration errors</li>
<li><strong>Debuggable</strong> - Use the same tools you use for regular code</li>
<li><strong>Cross-Platform</strong> - Same build.zig works everywhere</li>
<li><strong>Integrated</strong> - Uses the compiler&rsquo;s caching infrastructure</li>
<li><strong>Parallel</strong> - Independent steps run concurrently</li>
<li><strong>Lazy</strong> - Only runs steps that are actually needed</li>
</ol>
<p>The build.zig file is not just configuration - it&rsquo;s a real program that orchestrates your build. This means you have the full power of a programming language (with comptime!) to express complex build logic.</p>
<p>Combined with Zig&rsquo;s bundled libc and unified toolchain, cross-compilation becomes trivial: just pass <code>-Dtarget=...</code> and get a working binary for any supported platform.</p>
<hr>
<p><em>This concludes our deep dive into the Zig compiler internals. We&rsquo;ve covered the complete journey from source code to executable: Bootstrap → Tokenizer → Parser/AST → ZIR → Sema → AIR/CodeGen → Linking → Caching → Build System.</em></p>

          
          
          
        </div>
        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_drafts/09-build-system.md"
          data-oid-likes="likes_drafts/09-build-system.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/drafts/01-bootstrap-process/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Zig Compiler Internals Part 1: The Bootstrap Process
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-17T00:00:00&#43;00:00">December 17, 2025</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/drafts/08-caching-incremental/">
              <span class="leading-6">
                Part 8: Caching and Incremental Compilation&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-17T00:00:00&#43;00:00">December 17, 2025</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          Yohai
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
