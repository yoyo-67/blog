<!doctype html>
<html
  lang="en-us"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="true"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en-us">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Zig Compiler Internals Part 16: The Language Server Protocol &middot; Yohai&#39;s Blog</title>
    <meta name="title" content="Zig Compiler Internals Part 16: The Language Server Protocol &middot; Yohai&#39;s Blog">
  

  
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/drafts/16-lsp/">
  

  
  
    <meta name="author" content="Yohai">
  
  

  
  <meta property="og:url" content="http://localhost:1313/drafts/16-lsp/">
  <meta property="og:site_name" content="Yohai&#39;s Blog">
  <meta property="og:title" content="Zig Compiler Internals Part 16: The Language Server Protocol">
  <meta property="og:description" content="Zig Compiler Internals Part 16: The Language Server Protocol # How editors and compilers communicate to provide intelligent code assistance.
Introduction # When you type code in VS Code, Neovim, or any modern editor, you get autocomplete suggestions, error squiggles, hover documentation, and “go to definition” - all in real-time. How does this work?">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="drafts">
    <meta property="article:published_time" content="2025-12-18T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-12-18T00:00:00+00:00">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Zig Compiler Internals Part 16: The Language Server Protocol">
  <meta name="twitter:description" content="Zig Compiler Internals Part 16: The Language Server Protocol # How editors and compilers communicate to provide intelligent code assistance.
Introduction # When you type code in VS Code, Neovim, or any modern editor, you get autocomplete suggestions, error squiggles, hover documentation, and “go to definition” - all in real-time. How does this work?">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.0975a8c7c266a0697f94839b45e1574c449de253527d44ed516d5c5c3c820c9389d7d86576faae12267b129f8749ecbf7581cddb636aba7690aa633b95aaa87d.css"
    integrity="sha512-CXWox8JmoGl/lIObReFXTESd4lNSfUTtUW1cXDyCDJOJ19hldvquEiZ7Ep&#43;HSey/dYHN22NqunaQqmM7laqofQ==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
    
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9cc802d09f28c6af56ceee7bc6e320a39251fdae98243f2a9942f221ac57a9f49c51609699a91794a7b2580ee1deaa8e4d794a68ffa94aa317c66e893ce51e02.js"
      integrity="sha512-nMgC0J8oxq9Wzu57xuMgo5JR/a6YJD8qmULyIaxXqfScUWCWmakXlKeyWA7h3qqOTXlKaP&#43;pSqMXxm6JPOUeAg=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Drafts",
    "name": "Zig Compiler Internals Part 16: The Language Server Protocol",
    "headline": "Zig Compiler Internals Part 16: The Language Server Protocol",
    
    "abstract": "\u003ch1 class=\u0022relative group\u0022\u003eZig Compiler Internals Part 16: The Language Server Protocol\n    \u003cdiv id=\u0022zig-compiler-internals-part-16-the-language-server-protocol\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#zig-compiler-internals-part-16-the-language-server-protocol\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h1\u003e\n\u003cp\u003e\u003cem\u003eHow editors and compilers communicate to provide intelligent code assistance.\u003c\/em\u003e\u003c\/p\u003e\n\u003chr\u003e\n\n\u003ch2 class=\u0022relative group\u0022\u003eIntroduction\n    \u003cdiv id=\u0022introduction\u0022 class=\u0022anchor\u0022\u003e\u003c\/div\u003e\n    \n    \u003cspan\n        class=\u0022absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none\u0022\u003e\n        \u003ca class=\u0022text-primary-300 dark:text-neutral-700 !no-underline\u0022 href=\u0022#introduction\u0022 aria-label=\u0022Anchor\u0022\u003e#\u003c\/a\u003e\n    \u003c\/span\u003e\n    \n\u003c\/h2\u003e\n\u003cp\u003eWhen you type code in VS Code, Neovim, or any modern editor, you get autocomplete suggestions, error squiggles, hover documentation, and \u0026ldquo;go to definition\u0026rdquo; - all in real-time. How does this work?\u003c\/p\u003e",
    "inLanguage": "en-us",
    "url" : "http://localhost:1313/drafts/16-lsp/",
    "author" : {
      "@type": "Person",
      "name": "Yohai"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-12-18T00:00:00\u002b00:00",
    "datePublished": "2025-12-18T00:00:00\u002b00:00",
    
    "dateModified": "2025-12-18T00:00:00\u002b00:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "6181"
  }]
  </script>



  
  

  
  

  
  

  
  

  
  
</head>


















  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium">
          Yohai&rsquo;s Blog
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/posts/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Posts"
  title="Posts">
  
  
    <p class="text-base font-medium">
      Posts
    </p>
  
</a>



      
        
  <a
  href="/drafts/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Drafts"
  title="Drafts">
  
  
    <p class="text-base font-medium">
      Drafts
    </p>
  
</a>



      
        
  <a
  href="/tags/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Tags"
  title="Tags">
  
  
    <p class="text-base font-medium">
      Tags
    </p>
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/posts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Posts"
    title="Posts">
    
    
      <p class="text-bg font-bg">
        Posts
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/drafts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Drafts"
    title="Drafts">
    
    
      <p class="text-bg font-bg">
        Drafts
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href="/tags/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Tags"
    title="Tags">
    
    
      <p class="text-bg font-bg">
        Tags
      </p>
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>





    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
        <ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden">
  
  
    
  
    
  
  <li class="hidden">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/"
      >Yohai&#39;s Blog</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="inline">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/drafts/"
      >Drafts</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

  
  <li class="hidden">
    <a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href="/drafts/16-lsp/"
      >Zig Compiler Internals Part 16: The Language Server Protocol</a
    ><span class="px-1 text-primary-500">/</span>
  </li>

</ol>


      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Zig Compiler Internals Part 16: The Language Server Protocol
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-12-18T00:00:00&#43;00:00">December 18, 2025</time><span class="px-2 text-primary-500">&middot;</span><span>6181 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">30 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Yohai
      </div>
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      
        <div class="order-first lg:ml-auto px-0 lg:order-last lg:ps-8 lg:max-w-2xs">
          <div class="toc ps-5 print:hidden lg:sticky lg:top-10">
            
              <details
  open
  id="TOCView"
  class="toc-right mt-0 overflow-y-auto overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg -ms-5 ps-5 pe-2 hidden lg:block">
  <summary
    class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="min-w-[220px] py-2 border-dotted border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#part-1-the-problem-lsp-solves">Part 1: The Problem LSP Solves</a>
      <ul>
        <li><a href="#before-lsp-the-mn-problem">Before LSP: The M×N Problem</a></li>
        <li><a href="#after-lsp-the-mn-solution">After LSP: The M+N Solution</a></li>
        <li><a href="#lsp-history">LSP History</a></li>
      </ul>
    </li>
    <li><a href="#part-2-lsp-architecture">Part 2: LSP Architecture</a>
      <ul>
        <li><a href="#client-server-model">Client-Server Model</a></li>
        <li><a href="#communication-flow">Communication Flow</a></li>
        <li><a href="#transport-mechanisms">Transport Mechanisms</a></li>
      </ul>
    </li>
    <li><a href="#part-3-the-lsp-protocol">Part 3: The LSP Protocol</a>
      <ul>
        <li><a href="#json-rpc-20">JSON-RPC 2.0</a></li>
        <li><a href="#initialization-handshake">Initialization Handshake</a></li>
        <li><a href="#document-positions">Document Positions</a></li>
      </ul>
    </li>
    <li><a href="#part-4-core-lsp-features">Part 4: Core LSP Features</a>
      <ul>
        <li><a href="#completion-autocomplete">Completion (Autocomplete)</a></li>
        <li><a href="#hover-information">Hover Information</a></li>
        <li><a href="#go-to-definition">Go to Definition</a></li>
        <li><a href="#diagnostics-errors-and-warnings">Diagnostics (Errors and Warnings)</a></li>
        <li><a href="#find-references">Find References</a></li>
        <li><a href="#rename-symbol">Rename Symbol</a></li>
      </ul>
    </li>
    <li><a href="#part-5-document-synchronization">Part 5: Document Synchronization</a>
      <ul>
        <li><a href="#keeping-documents-in-sync">Keeping Documents in Sync</a></li>
        <li><a href="#document-lifecycle">Document Lifecycle</a></li>
      </ul>
    </li>
    <li><a href="#part-6-how-zls-works">Part 6: How ZLS Works</a>
      <ul>
        <li><a href="#zls-architecture">ZLS Architecture</a></li>
        <li><a href="#completion-implementation">Completion Implementation</a></li>
        <li><a href="#go-to-definition-implementation">Go to Definition Implementation</a></li>
      </ul>
    </li>
    <li><a href="#part-7-implementing-your-own-lsp-server">Part 7: Implementing Your Own LSP Server</a>
      <ul>
        <li><a href="#basic-server-structure">Basic Server Structure</a></li>
        <li><a href="#reading-messages">Reading Messages</a></li>
        <li><a href="#writing-messages">Writing Messages</a></li>
        <li><a href="#handling-initialize">Handling Initialize</a></li>
        <li><a href="#handling-completion">Handling Completion</a></li>
      </ul>
    </li>
    <li><a href="#part-8-performance-considerations">Part 8: Performance Considerations</a>
      <ul>
        <li><a href="#the-responsiveness-challenge">The Responsiveness Challenge</a></li>
        <li><a href="#incremental-analysis">Incremental Analysis</a></li>
        <li><a href="#cancellation">Cancellation</a></li>
        <li><a href="#memory-management">Memory Management</a></li>
      </ul>
    </li>
    <li><a href="#part-9-advanced-features">Part 9: Advanced Features</a>
      <ul>
        <li><a href="#semantic-tokens">Semantic Tokens</a></li>
        <li><a href="#code-actions">Code Actions</a></li>
        <li><a href="#inlay-hints">Inlay Hints</a></li>
      </ul>
    </li>
    <li><a href="#part-10-the-big-picture">Part 10: The Big Picture</a>
      <ul>
        <li><a href="#lsp-ecosystem">LSP Ecosystem</a></li>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#key-takeaways">Key Takeaways</a></li>
      </ul>
    </li>
    <li><a href="#further-reading">Further Reading</a>
      <ul>
        <li><a href="#specifications">Specifications</a></li>
        <li><a href="#implementations-to-study">Implementations to Study</a></li>
        <li><a href="#tutorials">Tutorials</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
    <li><a href="#navigation">Navigation</a></li>
  </ul>
</nav>
  </div>
</details>
<details class="toc-inside mt-0 overflow-hidden rounded-lg -ms-5 ps-5 lg:hidden">
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 -ms-5 ps-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">
    Table of Contents
  </summary>
  <div
    class="py-2 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#part-1-the-problem-lsp-solves">Part 1: The Problem LSP Solves</a>
      <ul>
        <li><a href="#before-lsp-the-mn-problem">Before LSP: The M×N Problem</a></li>
        <li><a href="#after-lsp-the-mn-solution">After LSP: The M+N Solution</a></li>
        <li><a href="#lsp-history">LSP History</a></li>
      </ul>
    </li>
    <li><a href="#part-2-lsp-architecture">Part 2: LSP Architecture</a>
      <ul>
        <li><a href="#client-server-model">Client-Server Model</a></li>
        <li><a href="#communication-flow">Communication Flow</a></li>
        <li><a href="#transport-mechanisms">Transport Mechanisms</a></li>
      </ul>
    </li>
    <li><a href="#part-3-the-lsp-protocol">Part 3: The LSP Protocol</a>
      <ul>
        <li><a href="#json-rpc-20">JSON-RPC 2.0</a></li>
        <li><a href="#initialization-handshake">Initialization Handshake</a></li>
        <li><a href="#document-positions">Document Positions</a></li>
      </ul>
    </li>
    <li><a href="#part-4-core-lsp-features">Part 4: Core LSP Features</a>
      <ul>
        <li><a href="#completion-autocomplete">Completion (Autocomplete)</a></li>
        <li><a href="#hover-information">Hover Information</a></li>
        <li><a href="#go-to-definition">Go to Definition</a></li>
        <li><a href="#diagnostics-errors-and-warnings">Diagnostics (Errors and Warnings)</a></li>
        <li><a href="#find-references">Find References</a></li>
        <li><a href="#rename-symbol">Rename Symbol</a></li>
      </ul>
    </li>
    <li><a href="#part-5-document-synchronization">Part 5: Document Synchronization</a>
      <ul>
        <li><a href="#keeping-documents-in-sync">Keeping Documents in Sync</a></li>
        <li><a href="#document-lifecycle">Document Lifecycle</a></li>
      </ul>
    </li>
    <li><a href="#part-6-how-zls-works">Part 6: How ZLS Works</a>
      <ul>
        <li><a href="#zls-architecture">ZLS Architecture</a></li>
        <li><a href="#completion-implementation">Completion Implementation</a></li>
        <li><a href="#go-to-definition-implementation">Go to Definition Implementation</a></li>
      </ul>
    </li>
    <li><a href="#part-7-implementing-your-own-lsp-server">Part 7: Implementing Your Own LSP Server</a>
      <ul>
        <li><a href="#basic-server-structure">Basic Server Structure</a></li>
        <li><a href="#reading-messages">Reading Messages</a></li>
        <li><a href="#writing-messages">Writing Messages</a></li>
        <li><a href="#handling-initialize">Handling Initialize</a></li>
        <li><a href="#handling-completion">Handling Completion</a></li>
      </ul>
    </li>
    <li><a href="#part-8-performance-considerations">Part 8: Performance Considerations</a>
      <ul>
        <li><a href="#the-responsiveness-challenge">The Responsiveness Challenge</a></li>
        <li><a href="#incremental-analysis">Incremental Analysis</a></li>
        <li><a href="#cancellation">Cancellation</a></li>
        <li><a href="#memory-management">Memory Management</a></li>
      </ul>
    </li>
    <li><a href="#part-9-advanced-features">Part 9: Advanced Features</a>
      <ul>
        <li><a href="#semantic-tokens">Semantic Tokens</a></li>
        <li><a href="#code-actions">Code Actions</a></li>
        <li><a href="#inlay-hints">Inlay Hints</a></li>
      </ul>
    </li>
    <li><a href="#part-10-the-big-picture">Part 10: The Big Picture</a>
      <ul>
        <li><a href="#lsp-ecosystem">LSP Ecosystem</a></li>
        <li><a href="#summary">Summary</a></li>
        <li><a href="#key-takeaways">Key Takeaways</a></li>
      </ul>
    </li>
    <li><a href="#further-reading">Further Reading</a>
      <ul>
        <li><a href="#specifications">Specifications</a></li>
        <li><a href="#implementations-to-study">Implementations to Study</a></li>
        <li><a href="#tutorials">Tutorials</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
    <li><a href="#navigation">Navigation</a></li>
  </ul>
</nav>
  </div>
</details>



            
          </div>
        </div>
      


      <div class="min-w-0 min-h-0 max-w-fit">
        

        <div class="article-content max-w-prose mb-20">
          
<h1 class="relative group">Zig Compiler Internals Part 16: The Language Server Protocol
    <div id="zig-compiler-internals-part-16-the-language-server-protocol" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#zig-compiler-internals-part-16-the-language-server-protocol" aria-label="Anchor">#</a>
    </span>
    
</h1>
<p><em>How editors and compilers communicate to provide intelligent code assistance.</em></p>
<hr>

<h2 class="relative group">Introduction
    <div id="introduction" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#introduction" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>When you type code in VS Code, Neovim, or any modern editor, you get autocomplete suggestions, error squiggles, hover documentation, and &ldquo;go to definition&rdquo; - all in real-time. How does this work?</p>
<p>The answer is the <strong>Language Server Protocol (LSP)</strong> - a standardized way for editors to communicate with language-specific tools.</p>
<p>In this article, we&rsquo;ll explore:</p>
<ul>
<li>What problem LSP solves and why it was created</li>
<li>How the protocol works (JSON-RPC over stdio/TCP)</li>
<li>Core LSP features and how they map to compiler internals</li>
<li>How ZLS (Zig Language Server) uses Zig&rsquo;s compiler</li>
<li>How to implement your own language server</li>
</ul>
<p>Understanding LSP bridges the gap between compiler internals and the developer experience.</p>
<hr>

<h2 class="relative group">Part 1: The Problem LSP Solves
    <div id="part-1-the-problem-lsp-solves" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-1-the-problem-lsp-solves" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Before LSP: The M×N Problem
    <div id="before-lsp-the-mn-problem" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#before-lsp-the-mn-problem" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    THE M×N PROBLEM                                           │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Before LSP, each editor needed custom support for each language:           │
│                                                                              │
│   EDITORS (M)              LANGUAGES (N)                                     │
│   ───────────              ─────────────                                     │
│   VS Code ─────────────────► Python                                          │
│          ─────────────────► JavaScript                                       │
│          ─────────────────► Rust                                             │
│          ─────────────────► Zig                                              │
│                                                                              │
│   Vim    ─────────────────► Python (different plugin)                        │
│          ─────────────────► JavaScript (different plugin)                    │
│          ─────────────────► Rust (different plugin)                          │
│          ─────────────────► Zig (different plugin)                           │
│                                                                              │
│   Emacs  ─────────────────► Python (yet another plugin)                      │
│          ─────────────────► JavaScript (yet another plugin)                  │
│          ─────────────────► Rust (yet another plugin)                        │
│          ─────────────────► Zig (yet another plugin)                         │
│                                                                              │
│   Total integrations needed: M editors × N languages = M×N plugins!          │
│                                                                              │
│   With 10 editors and 50 languages = 500 separate integrations!              │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">After LSP: The M+N Solution
    <div id="after-lsp-the-mn-solution" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#after-lsp-the-mn-solution" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    THE M+N SOLUTION                                          │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   With LSP, editors speak one protocol, languages implement one server:      │
│                                                                              │
│   EDITORS (M)              LSP                LANGUAGE SERVERS (N)           │
│   ───────────              ───                ────────────────────           │
│                                                                              │
│   VS Code ─────┐                         ┌──── Python (pylsp)                │
│                │                         │                                   │
│   Vim    ─────┼───► Standard Protocol ◄──┼──── JavaScript (tsserver)         │
│                │        (JSON-RPC)       │                                   │
│   Emacs  ─────┼                         ├──── Rust (rust-analyzer)           │
│                │                         │                                   │
│   Helix  ─────┘                         └──── Zig (ZLS)                      │
│                                                                              │
│   Total integrations: M editors + N servers = M+N implementations            │
│                                                                              │
│   With 10 editors and 50 languages = 60 implementations (not 500!)           │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">LSP History
    <div id="lsp-history" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lsp-history" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    LSP TIMELINE                                              │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   2016  Microsoft creates LSP for VS Code                                    │
│         Initially for OmniSharp (C#) integration                             │
│                                                                              │
│   2017  LSP 3.0 released, widely adopted                                     │
│         Rust, Python, Go servers emerge                                      │
│                                                                              │
│   2018  LSP becomes the de facto standard                                    │
│         Eclipse, Vim, Emacs add LSP support                                  │
│                                                                              │
│   2020+ Every major language has an LSP server                               │
│         ZLS, rust-analyzer, gopls, clangd, etc.                             │
│                                                                              │
│   Today LSP is essential infrastructure for programming tools                │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 2: LSP Architecture
    <div id="part-2-lsp-architecture" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-2-lsp-architecture" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Client-Server Model
    <div id="client-server-model" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#client-server-model" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    LSP ARCHITECTURE                                          │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                          EDITOR (Client)                            │   │
│   │  ┌─────────────────────────────────────────────────────────────┐   │   │
│   │  │                    LSP Client Library                        │   │   │
│   │  │  • Manages connection to server                              │   │   │
│   │  │  • Sends requests/notifications                              │   │   │
│   │  │  • Receives responses                                        │   │   │
│   │  │  • Updates UI (completions, diagnostics, etc.)              │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   └───────────────────────────────┬─────────────────────────────────────┘   │
│                                   │                                          │
│                          JSON-RPC over stdio                                 │
│                                   │                                          │
│   ┌───────────────────────────────▼─────────────────────────────────────┐   │
│   │                      LANGUAGE SERVER                                │   │
│   │  ┌─────────────────────────────────────────────────────────────┐   │   │
│   │  │                    Server Implementation                     │   │   │
│   │  │  • Receives requests                                         │   │   │
│   │  │  • Parses/analyzes code                                      │   │   │
│   │  │  • Uses compiler infrastructure                              │   │   │
│   │  │  • Returns responses                                         │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   │                              │                                      │   │
│   │  ┌───────────────────────────▼─────────────────────────────────┐   │   │
│   │  │              Compiler Frontend (Lexer, Parser, Sema)        │   │   │
│   │  └─────────────────────────────────────────────────────────────┘   │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Communication Flow
    <div id="communication-flow" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#communication-flow" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    TYPICAL LSP SESSION                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   CLIENT (Editor)                         SERVER (Language Server)           │
│   ───────────────                         ────────────────────────           │
│                                                                              │
│   1. Start server process                                                    │
│      └──────────────────────────────────────────────────────────────►       │
│                                                                              │
│   2. Initialize                                                              │
│      ──────────── initialize ──────────────────────────────────────►       │
│      ◄─────────── result (capabilities) ───────────────────────────        │
│      ──────────── initialized ─────────────────────────────────────►       │
│                                                                              │
│   3. Open file                                                               │
│      ──────────── textDocument/didOpen ────────────────────────────►       │
│                                                                              │
│   4. Server analyzes, sends diagnostics                                      │
│      ◄─────────── textDocument/publishDiagnostics ─────────────────        │
│                                                                              │
│   5. User requests completion                                                │
│      ──────────── textDocument/completion ─────────────────────────►       │
│      ◄─────────── completion items ────────────────────────────────        │
│                                                                              │
│   6. User modifies file                                                      │
│      ──────────── textDocument/didChange ──────────────────────────►       │
│      ◄─────────── textDocument/publishDiagnostics ─────────────────        │
│                                                                              │
│   7. User hovers over symbol                                                 │
│      ──────────── textDocument/hover ──────────────────────────────►       │
│      ◄─────────── hover content ───────────────────────────────────        │
│                                                                              │
│   8. User triggers &#34;Go to Definition&#34;                                        │
│      ──────────── textDocument/definition ─────────────────────────►       │
│      ◄─────────── location ────────────────────────────────────────        │
│                                                                              │
│   9. Close file / shutdown                                                   │
│      ──────────── textDocument/didClose ───────────────────────────►       │
│      ──────────── shutdown ────────────────────────────────────────►       │
│      ──────────── exit ────────────────────────────────────────────►       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Transport Mechanisms
    <div id="transport-mechanisms" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#transport-mechanisms" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    TRANSPORT OPTIONS                                         │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   1. STDIO (Most Common)                                                     │
│      ─────────────────────                                                   │
│      Editor spawns server as child process                                   │
│      Communication via stdin/stdout                                          │
│                                                                              │
│      Editor ──stdin──► Server                                                │
│      Editor ◄─stdout── Server                                                │
│                                                                              │
│   2. TCP Socket                                                              │
│      ──────────────                                                          │
│      Server listens on a port                                                │
│      Editor connects as client                                               │
│      Useful for debugging or remote servers                                  │
│                                                                              │
│   3. Named Pipes (Windows)                                                   │
│      ─────────────────────                                                   │
│      Platform-specific IPC                                                   │
│                                                                              │
│   Message format (for all transports):                                       │
│   ────────────────────────────────────                                       │
│   Content-Length: 52\r\n                                                     │
│   \r\n                                                                       │
│   {&#34;jsonrpc&#34;:&#34;2.0&#34;,&#34;method&#34;:&#34;initialize&#34;,&#34;id&#34;:1,...}                        │
│                                                                              │
│   HTTP-like headers + JSON-RPC body                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 3: The LSP Protocol
    <div id="part-3-the-lsp-protocol" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-3-the-lsp-protocol" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">JSON-RPC 2.0
    <div id="json-rpc-20" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#json-rpc-20" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>LSP uses JSON-RPC 2.0 for all messages:</p>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    JSON-RPC MESSAGE TYPES                                    │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   REQUEST (expects response):                                                │
│   ───────────────────────────                                                │
│   {                                                                          │
│       &#34;jsonrpc&#34;: &#34;2.0&#34;,                                                      │
│       &#34;id&#34;: 1,                          // Unique ID for matching response   │
│       &#34;method&#34;: &#34;textDocument/completion&#34;,                                   │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///path/to/file.zig&#34; },            │
│           &#34;position&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 5 }                        │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   RESPONSE (to a request):                                                   │
│   ────────────────────────                                                   │
│   {                                                                          │
│       &#34;jsonrpc&#34;: &#34;2.0&#34;,                                                      │
│       &#34;id&#34;: 1,                          // Matches request ID                │
│       &#34;result&#34;: {                                                            │
│           &#34;items&#34;: [                                                         │
│               { &#34;label&#34;: &#34;print&#34;, &#34;kind&#34;: 3, ... },                         │
│               { &#34;label&#34;: &#34;println&#34;, &#34;kind&#34;: 3, ... }                        │
│           ]                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   NOTIFICATION (no response expected):                                       │
│   ────────────────────────────────────                                       │
│   {                                                                          │
│       &#34;jsonrpc&#34;: &#34;2.0&#34;,                                                      │
│       &#34;method&#34;: &#34;textDocument/didChange&#34;,  // No &#34;id&#34; field!                │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///path/to/file.zig&#34; },            │
│           &#34;contentChanges&#34;: [{ &#34;text&#34;: &#34;new content&#34; }]                     │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Initialization Handshake
    <div id="initialization-handshake" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#initialization-handshake" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    INITIALIZATION SEQUENCE                                   │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Client sends `initialize` request:                                         │
│   ──────────────────────────────────                                         │
│   {                                                                          │
│       &#34;jsonrpc&#34;: &#34;2.0&#34;,                                                      │
│       &#34;id&#34;: 0,                                                               │
│       &#34;method&#34;: &#34;initialize&#34;,                                                │
│       &#34;params&#34;: {                                                            │
│           &#34;processId&#34;: 12345,                                                │
│           &#34;rootUri&#34;: &#34;file:///home/user/myproject&#34;,                         │
│           &#34;capabilities&#34;: {                                                  │
│               &#34;textDocument&#34;: {                                              │
│                   &#34;completion&#34;: { &#34;completionItem&#34;: { ... } },              │
│                   &#34;hover&#34;: { &#34;contentFormat&#34;: [&#34;markdown&#34;] }                │
│               }                                                              │
│           }                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server responds with its capabilities:                                     │
│   ──────────────────────────────────────                                     │
│   {                                                                          │
│       &#34;jsonrpc&#34;: &#34;2.0&#34;,                                                      │
│       &#34;id&#34;: 0,                                                               │
│       &#34;result&#34;: {                                                            │
│           &#34;capabilities&#34;: {                                                  │
│               &#34;completionProvider&#34;: { &#34;triggerCharacters&#34;: [&#34;.&#34;, &#34;@&#34;] },    │
│               &#34;hoverProvider&#34;: true,                                         │
│               &#34;definitionProvider&#34;: true,                                    │
│               &#34;referencesProvider&#34;: true,                                    │
│               &#34;renameProvider&#34;: true,                                        │
│               &#34;textDocumentSync&#34;: {                                          │
│                   &#34;openClose&#34;: true,                                         │
│                   &#34;change&#34;: 2  // Incremental                               │
│               }                                                              │
│           }                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Client sends `initialized` notification:                                   │
│   ────────────────────────────────────────                                   │
│   { &#34;jsonrpc&#34;: &#34;2.0&#34;, &#34;method&#34;: &#34;initialized&#34;, &#34;params&#34;: {} }               │
│                                                                              │
│   Now the session is ready for work!                                         │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Document Positions
    <div id="document-positions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#document-positions" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    POSITION AND RANGE                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   LSP uses 0-based line and character positions:                             │
│                                                                              │
│   const x = 42;                                                              │
│   │     │   │                                                                │
│   │     │   └── Position { line: 0, character: 10 }                         │
│   │     └────── Position { line: 0, character: 6 }                          │
│   └──────────── Position { line: 0, character: 0 }                          │
│                                                                              │
│   A Range is two positions (start and end):                                  │
│   ──────────────────────────────────────────                                 │
│   const x = 42;                                                              │
│         ─                                                                    │
│         └── Range { start: {0, 6}, end: {0, 7} }  // Just &#34;x&#34;               │
│                                                                              │
│   Important: character is UTF-16 code units, not bytes!                      │
│   ─────────────────────────────────────────────────────                      │
│   This matters for non-ASCII text:                                           │
│   const emoji = &#34;😀&#34;;  // 😀 is 2 UTF-16 code units                        │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 4: Core LSP Features
    <div id="part-4-core-lsp-features" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-4-core-lsp-features" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Completion (Autocomplete)
    <div id="completion-autocomplete" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#completion-autocomplete" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    COMPLETION                                                │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User types: std.debug.pr|                                                  │
│                          └── cursor here                                    │
│                                                                              │
│   Client request:                                                            │
│   ───────────────                                                            │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/completion&#34;,                                   │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///main.zig&#34; },                    │
│           &#34;position&#34;: { &#34;line&#34;: 5, &#34;character&#34;: 15 }                        │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response:                                                           │
│   ────────────────                                                           │
│   {                                                                          │
│       &#34;items&#34;: [                                                             │
│           {                                                                  │
│               &#34;label&#34;: &#34;print&#34;,                                              │
│               &#34;kind&#34;: 3,  // Function                                        │
│               &#34;detail&#34;: &#34;fn([]const u8, anytype) void&#34;,                     │
│               &#34;documentation&#34;: &#34;Prints to stderr...&#34;                        │
│           },                                                                 │
│           {                                                                  │
│               &#34;label&#34;: &#34;printStackTrace&#34;,                                    │
│               &#34;kind&#34;: 3,                                                     │
│               &#34;detail&#34;: &#34;fn() void&#34;                                         │
│           }                                                                  │
│       ]                                                                      │
│   }                                                                          │
│                                                                              │
│   Completion kinds: 1=Text, 2=Method, 3=Function, 6=Variable,               │
│                     7=Class, 8=Interface, 9=Module, 14=Keyword...           │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Hover Information
    <div id="hover-information" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#hover-information" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    HOVER                                                     │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User hovers over: std.mem.eql                                              │
│                          ^^^                                                 │
│                                                                              │
│   Client request:                                                            │
│   ───────────────                                                            │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/hover&#34;,                                        │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///main.zig&#34; },                    │
│           &#34;position&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 12 }                       │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response:                                                           │
│   ────────────────                                                           │
│   {                                                                          │
│       &#34;contents&#34;: {                                                          │
│           &#34;kind&#34;: &#34;markdown&#34;,                                                │
│           &#34;value&#34;: &#34;```zig\nfn eql(comptime T: type, a: []const T,         │
│                     b: []const T) bool\n```\n\nCompares two slices...&#34;      │
│       },                                                                     │
│       &#34;range&#34;: {                                                             │
│           &#34;start&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 8 },                          │
│           &#34;end&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 11 }                            │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   ┌─────────────────────────────────────┐                                   │
│   │ fn eql(comptime T: type,            │  ← Rendered in editor             │
│   │        a: []const T,                │                                   │
│   │        b: []const T) bool           │                                   │
│   │                                     │                                   │
│   │ Compares two slices element-by-     │                                   │
│   │ element and returns true if equal.  │                                   │
│   └─────────────────────────────────────┘                                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Go to Definition
    <div id="go-to-definition" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#go-to-definition" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    GO TO DEFINITION                                          │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User Ctrl+clicks on: myFunction(args)                                      │
│                        ^^^^^^^^^^                                            │
│                                                                              │
│   Client request:                                                            │
│   ───────────────                                                            │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/definition&#34;,                                   │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///main.zig&#34; },                    │
│           &#34;position&#34;: { &#34;line&#34;: 20, &#34;character&#34;: 4 }                        │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response (single location):                                         │
│   ──────────────────────────────────                                         │
│   {                                                                          │
│       &#34;uri&#34;: &#34;file:///src/utils.zig&#34;,                                       │
│       &#34;range&#34;: {                                                             │
│           &#34;start&#34;: { &#34;line&#34;: 42, &#34;character&#34;: 0 },                          │
│           &#34;end&#34;: { &#34;line&#34;: 42, &#34;character&#34;: 10 }                            │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response (multiple locations, e.g., overloads):                     │
│   ──────────────────────────────────────────────────────                     │
│   [                                                                          │
│       { &#34;uri&#34;: &#34;file:///src/impl1.zig&#34;, &#34;range&#34;: {...} },                   │
│       { &#34;uri&#34;: &#34;file:///src/impl2.zig&#34;, &#34;range&#34;: {...} }                    │
│   ]                                                                          │
│                                                                              │
│   Editor jumps to the definition location!                                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Diagnostics (Errors and Warnings)
    <div id="diagnostics-errors-and-warnings" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#diagnostics-errors-and-warnings" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    DIAGNOSTICS                                               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Server pushes diagnostics to client (notification, not request):           │
│                                                                              │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/publishDiagnostics&#34;,                          │
│       &#34;params&#34;: {                                                            │
│           &#34;uri&#34;: &#34;file:///main.zig&#34;,                                        │
│           &#34;diagnostics&#34;: [                                                   │
│               {                                                              │
│                   &#34;range&#34;: {                                                 │
│                       &#34;start&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 8 },              │
│                       &#34;end&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 20 }                │
│                   },                                                         │
│                   &#34;severity&#34;: 1,  // 1=Error, 2=Warning, 3=Info, 4=Hint    │
│                   &#34;source&#34;: &#34;zls&#34;,                                          │
│                   &#34;message&#34;: &#34;expected type &#39;i32&#39;, found &#39;bool&#39;&#34;            │
│               },                                                             │
│               {                                                              │
│                   &#34;range&#34;: { ... },                                         │
│                   &#34;severity&#34;: 2,                                             │
│                   &#34;message&#34;: &#34;unused variable &#39;x&#39;&#34;                          │
│               }                                                              │
│           ]                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Editor shows:                                                              │
│   ─────────────                                                              │
│      10 │ const result = getValue();                                         │
│         │          ~~~~~~~~~~~~                                              │
│         │          └── error: expected type &#39;i32&#39;, found &#39;bool&#39;             │
│         │                                                                    │
│      11 │ const x = 5;                                                       │
│         │       ~                                                            │
│         │       └── warning: unused variable &#39;x&#39;                            │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Find References
    <div id="find-references" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#find-references" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    FIND ALL REFERENCES                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User wants to find all uses of: myVariable                                 │
│                                                                              │
│   Client request:                                                            │
│   ───────────────                                                            │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/references&#34;,                                   │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///main.zig&#34; },                    │
│           &#34;position&#34;: { &#34;line&#34;: 5, &#34;character&#34;: 10 },                       │
│           &#34;context&#34;: { &#34;includeDeclaration&#34;: true }                         │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response:                                                           │
│   ────────────────                                                           │
│   [                                                                          │
│       {   // Declaration                                                     │
│           &#34;uri&#34;: &#34;file:///main.zig&#34;,                                        │
│           &#34;range&#34;: { &#34;start&#34;: {5, 10}, &#34;end&#34;: {5, 20} }                     │
│       },                                                                     │
│       {   // Usage 1                                                         │
│           &#34;uri&#34;: &#34;file:///main.zig&#34;,                                        │
│           &#34;range&#34;: { &#34;start&#34;: {12, 8}, &#34;end&#34;: {12, 18} }                    │
│       },                                                                     │
│       {   // Usage 2                                                         │
│           &#34;uri&#34;: &#34;file:///other.zig&#34;,                                       │
│           &#34;range&#34;: { &#34;start&#34;: {7, 4}, &#34;end&#34;: {7, 14} }                      │
│       }                                                                      │
│   ]                                                                          │
│                                                                              │
│   Editor shows list of all locations where symbol is used.                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Rename Symbol
    <div id="rename-symbol" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#rename-symbol" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    RENAME SYMBOL                                             │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User renames: oldName → newName                                            │
│                                                                              │
│   Client request:                                                            │
│   ───────────────                                                            │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/rename&#34;,                                       │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;file:///main.zig&#34; },                    │
│           &#34;position&#34;: { &#34;line&#34;: 5, &#34;character&#34;: 10 },                       │
│           &#34;newName&#34;: &#34;newName&#34;                                               │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Server response (WorkspaceEdit):                                           │
│   ────────────────────────────────                                           │
│   {                                                                          │
│       &#34;changes&#34;: {                                                           │
│           &#34;file:///main.zig&#34;: [                                             │
│               {                                                              │
│                   &#34;range&#34;: { &#34;start&#34;: {5, 10}, &#34;end&#34;: {5, 17} },           │
│                   &#34;newText&#34;: &#34;newName&#34;                                       │
│               },                                                             │
│               {                                                              │
│                   &#34;range&#34;: { &#34;start&#34;: {12, 8}, &#34;end&#34;: {12, 15} },          │
│                   &#34;newText&#34;: &#34;newName&#34;                                       │
│               }                                                              │
│           ],                                                                 │
│           &#34;file:///other.zig&#34;: [                                            │
│               {                                                              │
│                   &#34;range&#34;: { &#34;start&#34;: {7, 4}, &#34;end&#34;: {7, 11} },            │
│                   &#34;newText&#34;: &#34;newName&#34;                                       │
│               }                                                              │
│           ]                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Editor applies all edits atomically across all files!                      │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 5: Document Synchronization
    <div id="part-5-document-synchronization" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-5-document-synchronization" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Keeping Documents in Sync
    <div id="keeping-documents-in-sync" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#keeping-documents-in-sync" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    DOCUMENT SYNC MODES                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   The server needs an up-to-date copy of open documents.                     │
│   Two sync modes:                                                            │
│                                                                              │
│   1. FULL SYNC (TextDocumentSyncKind = 1)                                   │
│      ─────────────────────────────────────                                   │
│      Client sends entire document on each change                             │
│                                                                              │
│      {                                                                       │
│          &#34;method&#34;: &#34;textDocument/didChange&#34;,                                 │
│          &#34;params&#34;: {                                                         │
│              &#34;textDocument&#34;: { &#34;uri&#34;: &#34;...&#34;, &#34;version&#34;: 5 },                │
│              &#34;contentChanges&#34;: [                                             │
│                  { &#34;text&#34;: &#34;entire file content here...&#34; }                  │
│              ]                                                               │
│          }                                                                   │
│      }                                                                       │
│                                                                              │
│      Simple but inefficient for large files.                                 │
│                                                                              │
│   2. INCREMENTAL SYNC (TextDocumentSyncKind = 2)                            │
│      ─────────────────────────────────────────────                           │
│      Client sends only the changes                                           │
│                                                                              │
│      {                                                                       │
│          &#34;method&#34;: &#34;textDocument/didChange&#34;,                                 │
│          &#34;params&#34;: {                                                         │
│              &#34;textDocument&#34;: { &#34;uri&#34;: &#34;...&#34;, &#34;version&#34;: 5 },                │
│              &#34;contentChanges&#34;: [                                             │
│                  {                                                           │
│                      &#34;range&#34;: {                                              │
│                          &#34;start&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 0 },          │
│                          &#34;end&#34;: { &#34;line&#34;: 10, &#34;character&#34;: 5 }             │
│                      },                                                      │
│                      &#34;text&#34;: &#34;newText&#34;                                       │
│                  }                                                           │
│              ]                                                               │
│          }                                                                   │
│      }                                                                       │
│                                                                              │
│      More efficient, but server must track document state.                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Document Lifecycle
    <div id="document-lifecycle" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#document-lifecycle" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    DOCUMENT LIFECYCLE                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   1. User opens file:                                                        │
│      textDocument/didOpen                                                    │
│      {                                                                       │
│          &#34;textDocument&#34;: {                                                   │
│              &#34;uri&#34;: &#34;file:///main.zig&#34;,                                     │
│              &#34;languageId&#34;: &#34;zig&#34;,                                           │
│              &#34;version&#34;: 1,                                                   │
│              &#34;text&#34;: &#34;const std = @import(\&#34;std\&#34;);\n...&#34;                  │
│          }                                                                   │
│      }                                                                       │
│      Server: Start tracking this document, analyze it                        │
│                                                                              │
│   2. User edits file:                                                        │
│      textDocument/didChange (version increments)                             │
│      Server: Update internal copy, re-analyze                                │
│                                                                              │
│   3. User saves file:                                                        │
│      textDocument/didSave                                                    │
│      Server: Maybe run additional analysis (format, lint)                    │
│                                                                              │
│   4. User closes file:                                                       │
│      textDocument/didClose                                                   │
│      Server: Stop tracking, free resources                                   │
│                                                                              │
│   Version numbers ensure edits are applied in order.                         │
│   If versions don&#39;t match, something went wrong!                             │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 6: How ZLS Works
    <div id="part-6-how-zls-works" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-6-how-zls-works" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">ZLS Architecture
    <div id="zls-architecture" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#zls-architecture" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    ZLS (ZIG LANGUAGE SERVER)                                 │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   ZLS reuses Zig&#39;s actual compiler for analysis:                             │
│                                                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐   │
│   │                           ZLS                                       │   │
│   │                                                                     │   │
│   │   ┌────────────────┐      ┌────────────────────────────────────┐   │   │
│   │   │  JSON-RPC      │      │       Document Store               │   │   │
│   │   │  Handler       │      │  • Open files and their content    │   │   │
│   │   │                │      │  • Version tracking                │   │   │
│   │   └───────┬────────┘      └────────────────────────────────────┘   │   │
│   │           │                              │                          │   │
│   │           ▼                              ▼                          │   │
│   │   ┌───────────────────────────────────────────────────────────┐    │   │
│   │   │                  Request Handlers                          │    │   │
│   │   │  • completionHandler()                                     │    │   │
│   │   │  • hoverHandler()                                          │    │   │
│   │   │  • definitionHandler()                                     │    │   │
│   │   │  • referencesHandler()                                     │    │   │
│   │   └──────────────────────────┬────────────────────────────────┘    │   │
│   │                              │                                      │   │
│   │                              ▼                                      │   │
│   │   ┌───────────────────────────────────────────────────────────┐    │   │
│   │   │            Zig Compiler Components (libstd)               │    │   │
│   │   │  • Tokenizer (lexer)                                      │    │   │
│   │   │  • Parser (AST generation)                                │    │   │
│   │   │  • AstGen (ZIR generation)                                │    │   │
│   │   │  • Sema (semantic analysis)                               │    │   │
│   │   └───────────────────────────────────────────────────────────┘    │   │
│   │                                                                     │   │
│   └─────────────────────────────────────────────────────────────────────┘   │
│                                                                              │
│   ZLS uses Zig&#39;s own compiler library, not a separate implementation!        │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Completion Implementation
    <div id="completion-implementation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#completion-implementation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    ZLS COMPLETION FLOW                                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User types: std.mem.|                                                      │
│                                                                              │
│   1. Parse position to find context                                          │
│      ──────────────────────────────                                          │
│      • What&#39;s to the left of cursor?                                        │
│      • Is it a field access (.)? A scope (::)?                              │
│      • What identifier are we completing?                                    │
│                                                                              │
│   2. Analyze the expression before the dot                                   │
│      ────────────────────────────────────                                    │
│      • Parse &#34;std.mem&#34; using Zig tokenizer/parser                           │
│      • Get type of &#34;std.mem&#34; from Sema                                      │
│      • Result: it&#39;s a module/struct                                          │
│                                                                              │
│   3. Get completions from that type                                          │
│      ──────────────────────────────                                          │
│      • List all public declarations in std.mem                              │
│      • Filter by prefix (empty, so show all)                                │
│      • Include: eql, copy, set, Allocator, etc.                            │
│                                                                              │
│   4. Format as LSP completion items                                          │
│      ──────────────────────────────                                          │
│      [                                                                       │
│          { &#34;label&#34;: &#34;eql&#34;, &#34;kind&#34;: 3, &#34;detail&#34;: &#34;fn(...) bool&#34; },          │
│          { &#34;label&#34;: &#34;copy&#34;, &#34;kind&#34;: 3, &#34;detail&#34;: &#34;fn(...) void&#34; },         │
│          { &#34;label&#34;: &#34;Allocator&#34;, &#34;kind&#34;: 8, &#34;detail&#34;: &#34;type&#34; },            │
│          ...                                                                 │
│      ]                                                                       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Go to Definition Implementation
    <div id="go-to-definition-implementation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#go-to-definition-implementation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    ZLS GOTO DEFINITION FLOW                                  │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User Ctrl+clicks: const result = myFunction(args);                         │
│                                    ^^^^^^^^^^                                │
│                                                                              │
│   1. Find identifier at position                                             │
│      ────────────────────────────                                            │
│      • Tokenize area around cursor                                           │
│      • Find token that contains position                                     │
│      • Token: &#34;myFunction&#34;                                                   │
│                                                                              │
│   2. Resolve the identifier                                                  │
│      ─────────────────────                                                   │
│      • Walk up AST to find scope                                            │
│      • Look up &#34;myFunction&#34; in scope chain                                  │
│      • Found: Declaration in src/utils.zig line 42                          │
│                                                                              │
│   3. Get source location of declaration                                      │
│      ─────────────────────────────────                                       │
│      • Declaration has source location info                                  │
│      • Convert to LSP Location format                                        │
│                                                                              │
│   4. Return location                                                         │
│      ───────────────                                                         │
│      {                                                                       │
│          &#34;uri&#34;: &#34;file:///src/utils.zig&#34;,                                    │
│          &#34;range&#34;: { &#34;start&#34;: {41, 0}, &#34;end&#34;: {41, 10} }                    │
│      }                                                                       │
│                                                                              │
│   Special cases:                                                             │
│   ──────────────                                                             │
│   • @import(&#34;std&#34;) → Go to std library source                               │
│   • Built-in functions → Show documentation                                  │
│   • Comptime-generated → May not have source location                       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 7: Implementing Your Own LSP Server
    <div id="part-7-implementing-your-own-lsp-server" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-7-implementing-your-own-lsp-server" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Basic Server Structure
    <div id="basic-server-structure" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#basic-server-structure" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    MINIMAL LSP SERVER                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   struct Server {                                                            │
│       documents: HashMap(string, Document),                                  │
│       reader: Reader,                                                        │
│       writer: Writer,                                                        │
│                                                                              │
│       fn run(self: *Server) void {                                          │
│           while (true) {                                                     │
│               const message = self.readMessage();                           │
│               const response = self.handleMessage(message);                  │
│               if (response) |r| {                                           │
│                   self.writeMessage(r);                                      │
│               }                                                              │
│           }                                                                  │
│       }                                                                      │
│                                                                              │
│       fn handleMessage(self: *Server, msg: Message) ?Response {             │
│           switch (msg.method) {                                              │
│               &#34;initialize&#34; =&gt; return self.handleInitialize(msg),            │
│               &#34;textDocument/didOpen&#34; =&gt; {                                   │
│                   self.handleDidOpen(msg);                                   │
│                   return null;  // Notification, no response                 │
│               },                                                             │
│               &#34;textDocument/completion&#34; =&gt;                                   │
│                   return self.handleCompletion(msg),                        │
│               &#34;textDocument/hover&#34; =&gt;                                        │
│                   return self.handleHover(msg),                             │
│               // ... other handlers                                         │
│           }                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Reading Messages
    <div id="reading-messages" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#reading-messages" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    MESSAGE READING                                           │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   fn readMessage(reader: Reader) !Message {                                 │
│       // Read headers                                                        │
│       var content_length: usize = 0;                                        │
│       while (true) {                                                         │
│           const line = try reader.readLine();                               │
│           if (line.len == 0) break;  // Empty line = end of headers        │
│                                                                              │
│           if (startsWith(line, &#34;Content-Length: &#34;)) {                       │
│               content_length = parseInt(line[16..]);                        │
│           }                                                                  │
│       }                                                                      │
│                                                                              │
│       // Read body                                                           │
│       const body = try reader.readExact(content_length);                    │
│                                                                              │
│       // Parse JSON                                                          │
│       return json.parse(Message, body);                                      │
│   }                                                                          │
│                                                                              │
│   Example input:                                                             │
│   Content-Length: 52\r\n                                                     │
│   \r\n                                                                       │
│   {&#34;jsonrpc&#34;:&#34;2.0&#34;,&#34;id&#34;:1,&#34;method&#34;:&#34;initialize&#34;,...}                        │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Writing Messages
    <div id="writing-messages" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#writing-messages" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    MESSAGE WRITING                                           │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   fn writeMessage(writer: Writer, response: Response) !void {               │
│       // Serialize to JSON                                                   │
│       const body = json.stringify(response);                                 │
│                                                                              │
│       // Write headers                                                       │
│       try writer.print(&#34;Content-Length: {}\r\n&#34;, .{body.len});             │
│       try writer.writeAll(&#34;\r\n&#34;);                                          │
│                                                                              │
│       // Write body                                                          │
│       try writer.writeAll(body);                                            │
│   }                                                                          │
│                                                                              │
│   Example output:                                                            │
│   Content-Length: 128\r\n                                                    │
│   \r\n                                                                       │
│   {&#34;jsonrpc&#34;:&#34;2.0&#34;,&#34;id&#34;:1,&#34;result&#34;:{&#34;capabilities&#34;:{...}}}                  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Handling Initialize
    <div id="handling-initialize" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#handling-initialize" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    INITIALIZE HANDLER                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   fn handleInitialize(self: *Server, msg: Message) Response {               │
│       // Store client capabilities for later                                 │
│       self.client_capabilities = msg.params.capabilities;                   │
│                                                                              │
│       // Return our capabilities                                             │
│       return Response{                                                       │
│           .id = msg.id,                                                     │
│           .result = .{                                                       │
│               .capabilities = .{                                            │
│                   // What features we support                                │
│                   .completionProvider = .{                                  │
│                       .triggerCharacters = &amp;.{ &#34;.&#34;, &#34;:&#34; },                  │
│                   },                                                         │
│                   .hoverProvider = true,                                     │
│                   .definitionProvider = true,                               │
│                   .referencesProvider = true,                               │
│                   .textDocumentSync = .{                                    │
│                       .openClose = true,                                    │
│                       .change = .Incremental,                               │
│                   },                                                         │
│                   .diagnosticProvider = .{                                  │
│                       .interFileDependencies = true,                        │
│                       .workspaceDiagnostics = true,                         │
│                   },                                                         │
│               },                                                             │
│               .serverInfo = .{                                               │
│                   .name = &#34;my-language-server&#34;,                             │
│                   .version = &#34;0.1.0&#34;,                                       │
│               },                                                             │
│           },                                                                 │
│       };                                                                     │
│   }                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Handling Completion
    <div id="handling-completion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#handling-completion" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    COMPLETION HANDLER                                        │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   fn handleCompletion(self: *Server, msg: Message) Response {               │
│       const uri = msg.params.textDocument.uri;                               │
│       const pos = msg.params.position;                                       │
│                                                                              │
│       // Get document content                                                │
│       const doc = self.documents.get(uri) orelse                            │
│           return errorResponse(msg.id, &#34;Document not found&#34;);               │
│                                                                              │
│       // Find what we&#39;re completing                                          │
│       const context = analyzeCompletionContext(doc, pos);                   │
│                                                                              │
│       // Get completions based on context                                    │
│       var items = ArrayList(CompletionItem).init();                         │
│                                                                              │
│       switch (context.kind) {                                                │
│           .field_access =&gt; {                                                │
│               // Get type of expression before dot                          │
│               const expr_type = resolveType(context.expression);            │
│               // Add fields of that type                                    │
│               for (expr_type.fields) |field| {                              │
│                   items.append(.{                                           │
│                       .label = field.name,                                  │
│                       .kind = .Field,                                       │
│                       .detail = formatType(field.type),                     │
│                   });                                                        │
│               }                                                              │
│           },                                                                 │
│           .identifier =&gt; {                                                  │
│               // Add visible identifiers from scope                         │
│               for (getVisibleSymbols(context.scope)) |sym| {                │
│                   items.append(.{                                           │
│                       .label = sym.name,                                    │
│                       .kind = symbolKindToLSP(sym.kind),                    │
│                   });                                                        │
│               }                                                              │
│           },                                                                 │
│       }                                                                      │
│                                                                              │
│       return Response{                                                       │
│           .id = msg.id,                                                     │
│           .result = .{ .items = items.items },                             │
│       };                                                                     │
│   }                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 8: Performance Considerations
    <div id="part-8-performance-considerations" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-8-performance-considerations" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">The Responsiveness Challenge
    <div id="the-responsiveness-challenge" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-responsiveness-challenge" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    RESPONSIVENESS REQUIREMENTS                               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   LSP must feel instant. Target response times:                              │
│                                                                              │
│   Feature              │ Target    │ User Perception                        │
│   ─────────────────────┼───────────┼────────────────────────────────────────│
│   Completion           │ &lt;100ms    │ Feels instant                          │
│   Hover                │ &lt;200ms    │ Appears smoothly                       │
│   Go to Definition     │ &lt;300ms    │ Quick navigation                       │
│   Find References      │ &lt;1s       │ Acceptable wait                        │
│   Diagnostics          │ &lt;500ms    │ After typing stops                     │
│   Rename               │ &lt;2s       │ User expects this to take time        │
│                                                                              │
│   Challenge: Full compilation can take seconds or minutes!                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Incremental Analysis
    <div id="incremental-analysis" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#incremental-analysis" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    INCREMENTAL ANALYSIS                                      │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Don&#39;t recompile everything on every keystroke!                             │
│                                                                              │
│   Strategy 1: Incremental Parsing                                            │
│   ──────────────────────────────                                             │
│   • Only re-parse changed portions of file                                   │
│   • Tree-sitter and similar tools support this                               │
│   • Can update AST in &lt;10ms for typical edits                               │
│                                                                              │
│   Strategy 2: Caching                                                        │
│   ───────────────────                                                        │
│   • Cache parsed ASTs for unchanged files                                    │
│   • Cache type information                                                   │
│   • Invalidate only what depends on changes                                  │
│                                                                              │
│   Strategy 3: Lazy Analysis                                                  │
│   ─────────────────────────                                                  │
│   • Only analyze what&#39;s needed for current request                           │
│   • Completion at line 10 doesn&#39;t need to analyze line 1000                 │
│                                                                              │
│   Strategy 4: Background Analysis                                            │
│   ───────────────────────────────                                            │
│   • Run full analysis in background thread                                   │
│   • Use partial results for immediate responses                              │
│   • Update with full results when available                                  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Cancellation
    <div id="cancellation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#cancellation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    REQUEST CANCELLATION                                      │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   User types fast: a → ab → abc                                             │
│                                                                              │
│   Without cancellation:                                                      │
│   ─────────────────────                                                      │
│   Request 1: completion for &#34;a&#34;    →  [working...]                          │
│   Request 2: completion for &#34;ab&#34;   →  [queued]                              │
│   Request 3: completion for &#34;abc&#34;  →  [queued]                              │
│                                                                              │
│   User sees stale results, then jumpy updates.                               │
│                                                                              │
│   With cancellation:                                                         │
│   ──────────────────                                                         │
│   Request 1: completion for &#34;a&#34;    →  [working...]                          │
│   Cancel 1:  $/cancelRequest {id:1}                                         │
│   Request 2: completion for &#34;ab&#34;   →  [start fresh]                         │
│   Cancel 2:  $/cancelRequest {id:2}                                         │
│   Request 3: completion for &#34;abc&#34;  →  [this one completes]                  │
│                                                                              │
│   Only process the latest request!                                           │
│                                                                              │
│   Implementation:                                                            │
│   ───────────────                                                            │
│   • Check cancellation token periodically during long operations             │
│   • Return RequestCancelled error code (-32800)                             │
│   • Client ignores cancelled responses                                       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Memory Management
    <div id="memory-management" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#memory-management" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    MEMORY CONSIDERATIONS                                     │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   LSP servers run continuously, must avoid memory leaks:                     │
│                                                                              │
│   1. Document Storage                                                        │
│      ─────────────────                                                       │
│      • Store open documents efficiently                                      │
│      • Free when documents close                                             │
│      • Consider string interning for identifiers                            │
│                                                                              │
│   2. Cache Eviction                                                          │
│      ───────────────                                                         │
│      • Don&#39;t cache everything forever                                        │
│      • LRU eviction for parsed files                                        │
│      • Clear caches when memory pressure high                               │
│                                                                              │
│   3. Per-Request Allocation                                                  │
│      ─────────────────────                                                   │
│      • Use arena allocators for request handling                             │
│      • Free entire arena when request completes                              │
│      • Avoids fragmentation                                                  │
│                                                                              │
│   // Zig example                                                             │
│   fn handleRequest(self: *Server, request: Request) Response {              │
│       var arena = std.heap.ArenaAllocator.init(self.allocator);            │
│       defer arena.deinit();  // Free everything at once                     │
│       const alloc = arena.allocator();                                       │
│       // ... use alloc for all request processing                           │
│   }                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 9: Advanced Features
    <div id="part-9-advanced-features" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-9-advanced-features" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Semantic Tokens
    <div id="semantic-tokens" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#semantic-tokens" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    SEMANTIC HIGHLIGHTING                                     │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Regular syntax highlighting: Based on regex/grammar (lexical)              │
│   Semantic highlighting: Based on actual types and scopes (semantic)         │
│                                                                              │
│   // With semantic tokens:                                                   │
│   const x = getValue();                                                      │
│         ^   ^^^^^^^^                                                         │
│         │   └── highlighted as &#34;function&#34; (semantic info)                   │
│         └────── highlighted as &#34;variable&#34; (semantic info)                   │
│                                                                              │
│   Response format (delta-encoded):                                           │
│   ─────────────────────────────────                                          │
│   {                                                                          │
│       &#34;data&#34;: [                                                              │
│           // deltaLine, deltaChar, length, tokenType, modifiers             │
│           0, 6, 1, 0, 0,   // &#34;x&#34; at line 0, char 6, variable               │
│           0, 4, 8, 3, 0,   // &#34;getValue&#34; at +4 chars, function              │
│       ]                                                                      │
│   }                                                                          │
│                                                                              │
│   Token types: namespace, type, class, enum, interface, struct,             │
│                typeParameter, parameter, variable, function, ...            │
│                                                                              │
│   Modifiers: declaration, definition, readonly, static, deprecated, ...     │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Code Actions
    <div id="code-actions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#code-actions" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    CODE ACTIONS (Quick Fixes)                                │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   When there&#39;s an error, offer fixes:                                        │
│                                                                              │
│   error: unused variable &#39;x&#39;                                                 │
│                                                                              │
│   Code actions:                                                              │
│   • Remove unused variable                                                   │
│   • Prefix with underscore (_x)                                             │
│                                                                              │
│   Request:                                                                   │
│   ────────                                                                   │
│   {                                                                          │
│       &#34;method&#34;: &#34;textDocument/codeAction&#34;,                                  │
│       &#34;params&#34;: {                                                            │
│           &#34;textDocument&#34;: { &#34;uri&#34;: &#34;...&#34; },                                 │
│           &#34;range&#34;: { ... },  // Selected range                              │
│           &#34;context&#34;: {                                                       │
│               &#34;diagnostics&#34;: [ ... ]  // Relevant diagnostics               │
│           }                                                                  │
│       }                                                                      │
│   }                                                                          │
│                                                                              │
│   Response:                                                                  │
│   ─────────                                                                  │
│   [                                                                          │
│       {                                                                      │
│           &#34;title&#34;: &#34;Remove unused variable&#34;,                                │
│           &#34;kind&#34;: &#34;quickfix&#34;,                                               │
│           &#34;edit&#34;: {                                                          │
│               &#34;changes&#34;: {                                                   │
│                   &#34;file:///main.zig&#34;: [                                     │
│                       { &#34;range&#34;: {...}, &#34;newText&#34;: &#34;&#34; }                     │
│                   ]                                                          │
│               }                                                              │
│           }                                                                  │
│       },                                                                     │
│       {                                                                      │
│           &#34;title&#34;: &#34;Prefix with underscore&#34;,                                │
│           &#34;kind&#34;: &#34;quickfix&#34;,                                               │
│           &#34;edit&#34;: { ... }                                                   │
│       }                                                                      │
│   ]                                                                          │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Inlay Hints
    <div id="inlay-hints" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#inlay-hints" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    INLAY HINTS                                               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Show extra info inline in the editor:                                      │
│                                                                              │
│   Without inlay hints:                                                       │
│   ────────────────────                                                       │
│   const result = calculate(10, 20, true);                                    │
│                                                                              │
│   With inlay hints:                                                          │
│   ──────────────────                                                         │
│   const result: i32 = calculate(width: 10, height: 20, fill: true);         │
│               ^^^^^             ^^^^^^      ^^^^^^^     ^^^^^                │
│               type hint         parameter name hints                         │
│                                                                              │
│   Response:                                                                  │
│   ─────────                                                                  │
│   [                                                                          │
│       {                                                                      │
│           &#34;position&#34;: { &#34;line&#34;: 0, &#34;character&#34;: 12 },                       │
│           &#34;label&#34;: &#34;: i32&#34;,                                                 │
│           &#34;kind&#34;: 1  // Type                                                │
│       },                                                                     │
│       {                                                                      │
│           &#34;position&#34;: { &#34;line&#34;: 0, &#34;character&#34;: 26 },                       │
│           &#34;label&#34;: &#34;width:&#34;,                                                │
│           &#34;kind&#34;: 2  // Parameter                                           │
│       },                                                                     │
│       // ...                                                                 │
│   ]                                                                          │
│                                                                              │
│   Helps understand code without hovering over everything!                    │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Part 10: The Big Picture
    <div id="part-10-the-big-picture" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#part-10-the-big-picture" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">LSP Ecosystem
    <div id="lsp-ecosystem" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#lsp-ecosystem" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    THE LSP ECOSYSTEM                                         │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   EDITORS WITH LSP SUPPORT:                                                  │
│   ─────────────────────────                                                  │
│   • VS Code (native)                                                         │
│   • Neovim (built-in since 0.5)                                             │
│   • Vim (via coc.nvim, vim-lsp)                                             │
│   • Emacs (lsp-mode, eglot)                                                 │
│   • Helix (native)                                                           │
│   • Sublime Text (LSP package)                                               │
│   • Eclipse (lsp4e)                                                          │
│   • IntelliJ (limited, prefers own system)                                  │
│                                                                              │
│   NOTABLE LANGUAGE SERVERS:                                                  │
│   ──────────────────────────                                                 │
│   • rust-analyzer (Rust) - Gold standard for LSP                            │
│   • clangd (C/C++) - LLVM project                                           │
│   • gopls (Go) - Official Go team                                           │
│   • pyright/pylsp (Python)                                                  │
│   • typescript-language-server (TS/JS)                                      │
│   • ZLS (Zig)                                                                │
│   • lua-language-server (Lua)                                               │
│   • OmniSharp (C#)                                                           │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Summary
    <div id="summary" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#summary" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    LSP SUMMARY                                               │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   WHAT IT IS:                                                                │
│   ───────────                                                                │
│   • Standard protocol for editor ↔ language tool communication              │
│   • JSON-RPC over stdio/TCP                                                  │
│   • Defines requests, responses, notifications                               │
│                                                                              │
│   CORE FEATURES:                                                             │
│   ──────────────                                                             │
│   • Completion (autocomplete)                                                │
│   • Hover (documentation)                                                    │
│   • Go to Definition / References                                            │
│   • Diagnostics (errors/warnings)                                            │
│   • Rename symbol                                                            │
│   • Code actions (quick fixes)                                               │
│                                                                              │
│   KEY INSIGHT:                                                               │
│   ────────────                                                               │
│   LSP servers reuse compiler infrastructure!                                 │
│   Same lexer, parser, type checker that compiles code                        │
│   also powers IDE features.                                                  │
│                                                                              │
│   FOR COMPILER WRITERS:                                                      │
│   ─────────────────────                                                      │
│   • Expose your compiler as a library                                        │
│   • Make analysis incremental                                                │
│   • Prioritize responsiveness                                                │
│   • Consider LSP from the start                                              │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Key Takeaways
    <div id="key-takeaways" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#key-takeaways" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    KEY TAKEAWAYS                                             │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   1. LSP SOLVES THE M×N PROBLEM                                              │
│      One protocol means any editor can use any language server               │
│                                                                              │
│   2. IT&#39;S JUST JSON-RPC                                                      │
│      Requests, responses, notifications over stdio                           │
│      Simple enough to implement from scratch                                 │
│                                                                              │
│   3. COMPILERS AND LSP SHARE INFRASTRUCTURE                                  │
│      Lexer, parser, type checker serve both purposes                         │
│      ZLS uses Zig&#39;s actual compiler library                                  │
│                                                                              │
│   4. PERFORMANCE IS CRITICAL                                                 │
│      Users expect &lt;100ms responses                                           │
│      Incremental analysis, caching, cancellation are essential               │
│                                                                              │
│   5. LSP IS THE STANDARD                                                     │
│      Every major language has an LSP server                                  │
│      If you&#39;re building a language, plan for LSP                            │
│                                                                              │
│   6. GOOD LSP = GOOD DEVELOPER EXPERIENCE                                    │
│      Modern programming relies on intelligent tooling                        │
│      Completion, diagnostics, refactoring are expected                       │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre><hr>

<h2 class="relative group">Further Reading
    <div id="further-reading" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#further-reading" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Specifications
    <div id="specifications" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#specifications" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li>
<p><strong>LSP Specification</strong>: <a
  href="https://microsoft.github.io/language-server-protocol/"
    target="_blank"
  >https://microsoft.github.io/language-server-protocol/</a>
The official protocol documentation.</p>
</li>
<li>
<p><strong>JSON-RPC 2.0</strong>: <a
  href="https://www.jsonrpc.org/specification"
    target="_blank"
  >https://www.jsonrpc.org/specification</a>
The underlying RPC protocol.</p>
</li>
</ul>

<h3 class="relative group">Implementations to Study
    <div id="implementations-to-study" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#implementations-to-study" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>┌──────────────────────────────────────────────────────────────────────────────┐
│                    IMPLEMENTATIONS TO STUDY                                  │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   Server                │ Language │ Notable For                            │
│   ──────────────────────┼──────────┼──────────────────────────────────────  │
│   rust-analyzer         │ Rust     │ Excellent architecture, well-documented│
│   ZLS                   │ Zig      │ Uses compiler as library               │
│   clangd                │ C/C++    │ Handles massive codebases              │
│   gopls                 │ Go       │ Official, well-maintained              │
│   lua-language-server   │ Lua      │ Clean implementation                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
</code></pre>
<h3 class="relative group">Tutorials
    <div id="tutorials" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#tutorials" aria-label="Anchor">#</a>
    </span>
    
</h3>
<ul>
<li><strong>&ldquo;Writing an LSP Server&rdquo;</strong> - Various tutorials online for different languages</li>
<li><strong>rust-analyzer architecture docs</strong> - Excellent deep dive into LSP server design</li>
<li><strong>ZLS source code</strong> - See how it integrates with Zig compiler</li>
</ul>
<hr>

<h2 class="relative group">Conclusion
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#conclusion" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>The Language Server Protocol has transformed how we build programming tools. Instead of every editor reimplementing language support, we now have a clean separation:</p>
<ul>
<li><strong>Editors</strong> focus on UI/UX</li>
<li><strong>Language servers</strong> focus on language semantics</li>
<li><strong>LSP</strong> connects them</li>
</ul>
<p>For compiler writers, LSP is essential to understand. Your compiler&rsquo;s lexer, parser, and type checker aren&rsquo;t just for generating executables - they&rsquo;re the foundation for intelligent code editing.</p>
<p>When designing a new language, consider LSP from the start:</p>
<ul>
<li>Make your compiler usable as a library</li>
<li>Design for incremental analysis</li>
<li>Expose source locations throughout your IR</li>
<li>Plan for sub-100ms response times</li>
</ul>
<p>A great language with poor tooling will struggle for adoption. A good language with excellent LSP support will thrive.</p>
<hr>

<h2 class="relative group">Navigation
    <div id="navigation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#navigation" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>← <a
  href="../15-static-vs-dynamic">Previous: Part 15 - Static vs Dynamic Languages</a></p>
<p><a
  href="../">Back to Series Index</a></p>

          
          
          
        </div>
        
        

        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_drafts/16-lsp.md"
          data-oid-likes="likes_drafts/16-lsp.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/drafts/appendix-zig-patterns/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Appendix: Zig Patterns and Methods Reference
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-17T00:00:00&#43;00:00">December 17, 2025</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
            <a
              class="flex text-right text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/drafts/15-static-vs-dynamic/">
              <span class="leading-6">
                Zig Compiler Internals Part 15: Static vs Dynamic Languages&ensp;<span class="inline-block rtl:rotate-180">&rarr;</span>
              </span>
            </a>
            
              <span class="me-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-18T00:00:00&#43;00:00">December 18, 2025</time>
              </span>
            
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2025
          Yohai
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
