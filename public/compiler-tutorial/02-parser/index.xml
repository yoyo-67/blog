<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Section 2: The Parser on Yohai&#39;s Blog</title>
    <link>http://localhost:1313/compiler-tutorial/02-parser/</link>
    <description>Recent content in Section 2: The Parser on Yohai&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>© 2025 Yohai</copyright>
    <atom:link href="http://localhost:1313/compiler-tutorial/02-parser/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>2.1: Grammar Basics</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/01-grammar-basics/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/01-grammar-basics/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.1: What is a Grammar?
    &lt;div id=&#34;lesson-21-what-is-a-grammar&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-21-what-is-a-grammar&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Before we write any parser code, we need to understand &lt;strong&gt;grammar&lt;/strong&gt; - the rules that describe valid programs.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Understand why we need grammar rules, and learn the notation for writing them.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;The Problem: Flat Tokens Don&amp;rsquo;t Show Structure
    &lt;div id=&#34;the-problem-flat-tokens-dont-show-structure&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#the-problem-flat-tokens-dont-show-structure&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;The lexer gives us a flat list of tokens:&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.2: Repetition</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/02-repetition/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/02-repetition/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.2: Repetition and Loops
    &lt;div id=&#34;lesson-22-repetition-and-loops&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-22-repetition-and-loops&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Our grammar only handles &lt;code&gt;1 + 2&lt;/code&gt;. How do we handle &lt;code&gt;1 + 2 + 3&lt;/code&gt;?&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Use the &lt;code&gt;*&lt;/code&gt; operator in grammar rules and translate it to loops in code.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;The Problem
    &lt;div id=&#34;the-problem&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#the-problem&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Our current rule:&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.3: Precedence</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/03-precedence/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/03-precedence/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.3: Operator Precedence
    &lt;div id=&#34;lesson-23-operator-precedence&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-23-operator-precedence&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;1 + 2 * 3&lt;/code&gt; should be &lt;code&gt;7&lt;/code&gt;, not &lt;code&gt;9&lt;/code&gt;. How do we make &lt;code&gt;*&lt;/code&gt; happen before &lt;code&gt;+&lt;/code&gt;?&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Use a two-level grammar to handle operator precedence correctly.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;The Problem
    &lt;div id=&#34;the-problem&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#the-problem&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Our current grammar treats all operators the same:&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.4: Unary &amp; Parentheses</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/04-unary-parens/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/04-unary-parens/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.4: Unary Operators and Parentheses
    &lt;div id=&#34;lesson-24-unary-operators-and-parentheses&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-24-unary-operators-and-parentheses&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Complete our expression grammar with &lt;code&gt;-5&lt;/code&gt; and &lt;code&gt;(1 + 2)&lt;/code&gt;.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Add unary operators and parentheses to build a complete expression parser.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Unary Operators
    &lt;div id=&#34;unary-operators&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#unary-operators&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;What about &lt;code&gt;-5&lt;/code&gt; or &lt;code&gt;-x&lt;/code&gt;? These are &lt;strong&gt;unary operators&lt;/strong&gt; - they take one operand.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.5: Statements</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/05-statements/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/05-statements/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.5: Statements
    &lt;div id=&#34;lesson-25-statements&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-25-statements&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Expressions produce values. Statements DO things.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Parse statements: &lt;code&gt;const x = 5;&lt;/code&gt; and &lt;code&gt;return x;&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Expressions vs Statements
    &lt;div id=&#34;expressions-vs-statements&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#expressions-vs-statements&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;┌──────────────────────────────────────────────────────────────────────────────┐
│                    EXPRESSIONS VS STATEMENTS                                 │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   EXPRESSIONS produce a value:                                              │
│     42              → produces 42                                           │
│     x + y           → produces the sum                                      │
│     foo()           → produces return value                                 │
│                                                                              │
│   STATEMENTS perform an action:                                             │
│     const x = 5;    → creates a variable (no value produced)               │
│     return 42;      → exits the function (no value produced)               │
│     { ... }         → groups statements (no value produced)                │
│                                                                              │
│   Key difference: statements usually end with semicolons.                   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Expressions vs Statements vs Declarations
    &lt;div id=&#34;expressions-vs-statements-vs-declarations&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#expressions-vs-statements-vs-declarations&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;┌──────────────────────────────────────────────────────────────────────────────┐
│              EXPRESSIONS VS STATEMENTS VS DECLARATIONS                       │
├──────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   EXPRESSIONS: Produce a value                                              │
│   ─────────────────────────────                                             │
│     1 + 2           → 3                                                     │
│     x * y           → some number                                           │
│     foo()           → return value of foo                                   │
│                                                                              │
│   STATEMENTS: Do something (perform an action)                              │
│   ────────────────────────────────────────────                              │
│     return x;       → exits function with value x                           │
│     print(x);       → outputs x (if your language has this)                │
│     { ... }         → groups other statements                              │
│                                                                              │
│   DECLARATIONS: Create a new named thing                                    │
│   ──────────────────────────────────────────                                │
│     const x = 5;    → creates variable x                                   │
│     fn foo() {...}  → creates function foo                                 │
│                                                                              │
│   Declarations are a special kind of statement that introduces a name.     │
│                                                                              │
│   In our grammar, we&amp;#39;ll treat declarations as statements for simplicity.   │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Statement Grammar Rules
    &lt;div id=&#34;statement-grammar-rules&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#statement-grammar-rules&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;statement   → var_decl | return_stmt
var_decl    → &amp;#34;const&amp;#34; IDENTIFIER &amp;#34;=&amp;#34; expression &amp;#34;;&amp;#34;
return_stmt → &amp;#34;return&amp;#34; expression &amp;#34;;&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Let&amp;rsquo;s break these down:&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.6: Functions</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/06-functions/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/06-functions/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.6: Blocks and Functions
    &lt;div id=&#34;lesson-26-blocks-and-functions&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-26-blocks-and-functions&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Parse function declarations: &lt;code&gt;fn add(a: i32, b: i32) { return a + b; }&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Parse blocks and function declarations to complete our grammar.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Blocks
    &lt;div id=&#34;blocks&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#blocks&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;A &lt;strong&gt;block&lt;/strong&gt; is a sequence of statements wrapped in braces.&lt;/p&gt;</description>
      
    </item>
    
    <item>
      <title>2.7: Complete Parser</title>
      <link>http://localhost:1313/compiler-tutorial/02-parser/07-complete/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>http://localhost:1313/compiler-tutorial/02-parser/07-complete/</guid>
      <description>&lt;h1 class=&#34;relative group&#34;&gt;Lesson 2.7: Complete Parser
    &lt;div id=&#34;lesson-27-complete-parser&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#lesson-27-complete-parser&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h1&gt;
&lt;p&gt;Put everything together with the full grammar, implementation, and patterns.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;Goal
    &lt;div id=&#34;goal&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#goal&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Consolidate all lessons into a complete parser with reusable patterns.&lt;/p&gt;
&lt;hr&gt;

&lt;h2 class=&#34;relative group&#34;&gt;The Complete Grammar
    &lt;div id=&#34;the-complete-grammar&#34; class=&#34;anchor&#34;&gt;&lt;/div&gt;
    
    &lt;span
        class=&#34;absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none&#34;&gt;
        &lt;a class=&#34;text-primary-300 dark:text-neutral-700 !no-underline&#34; href=&#34;#the-complete-grammar&#34; aria-label=&#34;Anchor&#34;&gt;#&lt;/a&gt;
    &lt;/span&gt;
    
&lt;/h2&gt;
&lt;p&gt;Here&amp;rsquo;s our full grammar with 12 rules:&lt;/p&gt;</description>
      
    </item>
    
  </channel>
</rss>
